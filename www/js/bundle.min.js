function Keyboard(e){this.el=document.querySelectorAll("main")[0],this.canvas=document.getElementsByTagName("canvas")[0],this.keyMap=void 0,this.pathPoints=[],this.debug={},this.props={},paper.setup(this.canvas),this.init(),this.draw()}var Loader={queue:void 0,init:function(){this.queue=new createjs.LoadQueue,this.queue.on("complete",this.onLoadCompleted),this.queue.on("error",this.onLoadError),this.queue.on("progress",this.onLoadProgress)},load:function(e,t){console.log("Loading:",e[0].src);var n=this.queue;n.on("complete",t),n.loadManifest(e)},getContentById:function(e){return this.queue.getResult(e)},onLoadCompleted:function(){console.log("Load Completed")},onLoadError:function(){console.log("Load Error")},onLoadProgress:function(){console.log(".")}},App={container:void 0,init:function(e){this.container=e,Loader.init(),this.initialLoad()},initialLoad:function(){Loader.load([{id:"homepage",src:"data/homepage.html"}],this.loadCompleted.bind(this))},loadCompleted:function(){this.container.innerHTML=Loader.getContentById("homepage"),this.initialTransitionIn()},initialTransitionIn:function(){this.container.classList.add("fade-in"),console.log("[PAN] ‚òëÔ∏è"),Keyboard=new Keyboard},dispose:function(){this.container.innerHTML=""}};Keyboard.prototype.init=function(){this.keyMap=["`","1","2","3","4","5","6","7","8","9","0","-","=","backspace","tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","capslock","a","s","d","f","g","h","j","k","l",";","'","enter","shift","z","x","c","v","b","n","m",",",".","/","//shift","control","alt","meta"," ","//meta","//alt","//control"],window.addEventListener("keydown",function(e){this.onKeyDown(e.key.toLowerCase(),e.location),e.preventDefault()}.bind(this)),window.addEventListener("keyup",function(e){this.onKeyUp(e.key.toLowerCase(),e.location),e.preventDefault()}.bind(this)),window.addEventListener("resize",function(e){this.draw()}.bind(this))},Keyboard.prototype.draw=function(){console.log("draw"),paper.project.activeLayer.removeChildren(),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.style="",paper.view.viewSize=new paper.Size(window.innerWidth,window.innerHeight),this.keyboard=new paper.Group,this.path=new paper.Path,this.type=new paper.Group,this.graphics=new paper.Group([this.keyboard,this.path,this.type]),this.graphics.bringToFront(),this.text=[],this.debug.boundingBox=new paper.Path.Rectangle(this.keyboard.bounds),this.debug.boundingBox.position=paper.view.center,this.drawKeyboard(),this.drawPath(),this.graphics.position=paper.view.center,paper.view.draw()},Keyboard.prototype.drawKeyboard=function(e){for(var t=Math.round(.9*paper.view.bounds.width),n=Math.round(.007*paper.view.bounds.width),o=Math.round((t-13*n)/15.5),a=.015*paper.view.bounds.width,i=0;i<13;i++){var r=new paper.Rectangle(new paper.Point(i*(o+n),0),o),p=new paper.Path.Rectangle(r,new paper.Size(4,4));this.keyboard.addChild(p)}var d=new paper.Rectangle(new paper.Point(13*(o+n),0),new paper.Size(1.5*o,o)),h=new paper.Path.Rectangle(d,new paper.Size(4,4));this.keyboard.addChild(h);var s=new paper.Rectangle(new paper.Point(0,o+n),new paper.Size(1.5*o,o)),l=new paper.Path.Rectangle(s,new paper.Size(4,4));this.keyboard.addChild(l);for(var i=0;i<13;i++){var r=new paper.Rectangle(new paper.Point(i*(o+n)+l.bounds.width+n,o+n),o),p=new paper.Path.Rectangle(r,new paper.Size(4,4));this.keyboard.addChild(p)}var w=new paper.Rectangle(new paper.Point(0,2*(o+n)),new paper.Size(1.5*o+n,o)),c=new paper.Path.Rectangle(w,new paper.Size(4,4));this.keyboard.addChild(c);for(var i=0;i<11;i++){var r=new paper.Rectangle(new paper.Point(i*(o+n)+c.bounds.width+n,2*(o+n)),o),p=new paper.Path.Rectangle(r,new paper.Size(4,4));this.keyboard.addChild(p)}var u=new paper.Rectangle(new paper.Point(this.keyboard.lastChild.bounds.topRight.x+n,2*(o+n)),new paper.Size(2*o,o)),g=new paper.Path.Rectangle(u,new paper.Size(4,4));this.keyboard.addChild(g);var b=new paper.Rectangle(new paper.Point(0,3*(o+n)),new paper.Size(2*o+2*n,o)),y=new paper.Path.Rectangle(b,new paper.Size(4,4));this.keyboard.addChild(y);for(var i=0;i<10;i++){var r=new paper.Rectangle(new paper.Point(i*(o+n)+y.bounds.width+n,3*(o+n)),o),p=new paper.Path.Rectangle(r,new paper.Size(4,4));this.keyboard.addChild(p)}var v=new paper.Rectangle(new paper.Point(this.keyboard.lastChild.bounds.topRight.x+n,3*(o+n)),new paper.Point(g.bounds.bottomRight.x,g.bounds.bottomRight.y+n+o)),f=new paper.Path.Rectangle(v,new paper.Size(4,4));this.keyboard.addChild(f);var k=new paper.Rectangle(new paper.Point(0,4*(o+n)),new paper.Size(1.5*o,o)),P=new paper.Path.Rectangle(k,new paper.Size(4,4));this.keyboard.addChild(P);var C=new paper.Rectangle(new paper.Point(1.5*o+n,4*(o+n)),new paper.Size(o+n,o)),m=new paper.Path.Rectangle(C,new paper.Size(4,4));this.keyboard.addChild(m);var R=new paper.Rectangle(new paper.Point(this.keyboard.lastChild.bounds.topRight.x+n,4*(o+n)),new paper.Point(4*o+5*n-n,4*(o+n)+o)),x=new paper.Path.Rectangle(R,new paper.Size(4,4));this.keyboard.addChild(x);var S=new paper.Rectangle(new paper.Point(4*o+5*n,4*(o+n)),new paper.Size(6*o+5*n,o)),z=new paper.Path.Rectangle(S,new paper.Size(4,4));this.keyboard.addChild(z);var L=x.clone();L.position.x=z.bounds.rightCenter.x+x.bounds.width/2+n,this.keyboard.addChild(L);var K=m.clone();K.position.x=this.keyboard.lastChild.bounds.topRight.x+m.bounds.width/2+n,this.keyboard.addChild(K);var M=new paper.Rectangle(new paper.Point(this.keyboard.lastChild.bounds.topRight.x+n,4*(o+n)),new paper.Point(f.bounds.bottomRight.x,f.bounds.bottomRight.y+n+o)),B=new paper.Path.Rectangle(M,new paper.Size(4,4));this.keyboard.addChild(B);var T=new paper.PointText(new paper.Point(h.bounds.bottomRight.x-n,h.bounds.bottomRight.y-n));T.justification="right",T.fontSize=a,T.fontFamily="Roboto",T.fillColor="white",T.content="del",this.type.addChild(T);var q=new paper.PointText(new paper.Point(g.bounds.bottomRight.x-n,g.bounds.bottomRight.y-n));q.justification="right",q.fontSize=a,q.fontFamily="Roboto",q.fillColor="white",q.content="return",this.type.addChild(q),paper.view.bounds.width<1e3&&(q.content="‚Ä¢",T.content="‚Üê"),this.keyboard.style={fillColor:"#808080",strokeColor:new paper.Color(1,1,1,.4),strokeWidth:1.5,shadowColor:new paper.Color(0,0,0,.45),shadowBlur:4,shadowOffset:new paper.Point(0,2)}},Keyboard.prototype.drawPath=function(){var e=.004*paper.view.bounds.width+1;this.path.style={strokeWidth:e,fillColor:new paper.Color(0,0,0,0),strokeCap:"round",strokeJoin:"round"},this.path.strokeColor={gradient:{stops:[new paper.Color("#00FFF4"),new paper.Color("#1F00FF")]},origin:paper.view.bounds.leftCenter,destination:paper.view.bounds.rightCenter};for(var t=0;t<=this.pathPoints.length-1;t++)this.path.add(this.keyboard.children[this.pathPoints[t]].bounds.center);this.path.smooth()},Keyboard.prototype.locateKey=function(e,t){var n=null;if(1==t||0==t){for(var o=this.keyMap.length-1;o>=0;o--)this.keyMap[o]==e&&(n=o);null==n&&console.log("No match")}else 2==t&&("meta"==e&&(n=57),"alt"==e&&(n=58),"control"==e&&(n=59),"shift"==e&&(n=52));return n},Keyboard.prototype.onKeyDown=function(e,t){var n=this.locateKey(e,t);return this.pathPoints.push(n),this.keyboard.children[n].shadowColor=new paper.Color(0,0,0,.2),this.keyboard.children[n].shadowBlur=1,this.keyboard.children[n].shadowOffset=new paper.Point(0,1),"backspace"==e?void this["delete"]():"enter"==e?void paper.view.draw():(this.path.add(this.keyboard.children[n].bounds.center),this.path.smooth(),this.text.push(e),void paper.view.draw())},Keyboard.prototype.onKeyUp=function(e,t){for(var n=this.keyboard.children.length-1;n>=0;n--)this.keyboard.children[n].shadowColor=new paper.Color(0,0,0,.45),this.keyboard.children[n].shadowBlur=4,this.keyboard.children[n].shadowOffset=new paper.Point(0,2);"enter"==e&&this.path.segments.length>1&&(this.sendToPrinter(),this.resetAll()),paper.view.draw()},Keyboard.prototype["delete"]=function(){this.path.removeSegment(this.path.segments.length-1),console.log(this.pathPoints),this.pathPoints.pop(),console.log(this.pathPoints),this.text.pop(),paper.view.draw()},Keyboard.prototype.sendToPrinter=function(){for(var e=this.text.length-1;e>=0;e--)"meta"!=this.text[e]&&"control"!=this.text[e]&&"alt"!=this.text[e]&&"shift"!=this.text[e]&&"tab"!=this.text[e]&&"capslock"!=this.text[e]||(this.text[e]="‚ñë");var t='<?xml version="1.0" encoding="utf-8"?>';t+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="'+paper.view.bounds.width+'" height="'+paper.view.bounds.height+'">',t+=this.path.exportSVG({asString:!0}),t+="</svg>";var n=new Blob([t],{type:"data:image/svg+xml"});saveAs(n,this.text.join("")+".svg")},Keyboard.prototype.resetAll=function(){this.path.removeSegments(),this.text=[]},document.addEventListener("DOMContentLoaded",function(){console.log("üëª"),App.init(document.getElementById("container"))});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIktleWJvYXJkLmpzIiwibG9hZGVyLmpzIiwiYXBwLmpzIiwiaW5kZXguanMiXSwibmFtZXMiOlsiS2V5Ym9hcmQiLCJwYXJhbWV0ZXJzIiwidGhpcyIsImVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FudmFzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJrZXlNYXAiLCJ1bmRlZmluZWQiLCJwYXRoUG9pbnRzIiwiZGVidWciLCJwcm9wcyIsInBhcGVyIiwic2V0dXAiLCJpbml0IiwiZHJhdyIsIkxvYWRlciIsInF1ZXVlIiwiY3JlYXRlanMiLCJMb2FkUXVldWUiLCJvbiIsIm9uTG9hZENvbXBsZXRlZCIsIm9uTG9hZEVycm9yIiwib25Mb2FkUHJvZ3Jlc3MiLCJsb2FkIiwibWFuaWZlc3QiLCJvbkxvYWRlZCIsImNvbnNvbGUiLCJsb2ciLCJzcmMiLCJxIiwibG9hZE1hbmlmZXN0IiwiZ2V0Q29udGVudEJ5SWQiLCJpZCIsImdldFJlc3VsdCIsIkFwcCIsImNvbnRhaW5lciIsImluaXRpYWxMb2FkIiwibG9hZENvbXBsZXRlZCIsImJpbmQiLCJpbm5lckhUTUwiLCJpbml0aWFsVHJhbnNpdGlvbkluIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGlzcG9zZSIsInByb3RvdHlwZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwib25LZXlEb3duIiwia2V5IiwidG9Mb3dlckNhc2UiLCJsb2NhdGlvbiIsInByZXZlbnREZWZhdWx0Iiwib25LZXlVcCIsInByb2plY3QiLCJhY3RpdmVMYXllciIsInJlbW92ZUNoaWxkcmVuIiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJzdHlsZSIsInZpZXciLCJ2aWV3U2l6ZSIsIlNpemUiLCJrZXlib2FyZCIsIkdyb3VwIiwicGF0aCIsIlBhdGgiLCJ0eXBlIiwiZ3JhcGhpY3MiLCJicmluZ1RvRnJvbnQiLCJ0ZXh0IiwiYm91bmRpbmdCb3giLCJSZWN0YW5nbGUiLCJib3VuZHMiLCJwb3NpdGlvbiIsImNlbnRlciIsImRyYXdLZXlib2FyZCIsImRyYXdQYXRoIiwia2V5Ym9hcmRXaWR0aCIsIk1hdGgiLCJyb3VuZCIsIm1hcmdpbiIsImtleVNpemUiLCJ0eXBlU2l6ZSIsImkiLCJQb2ludCIsImFkZENoaWxkIiwiZGVsIiwiZGVsS2V5IiwidGFiIiwidGFiS2V5IiwiY2wiLCJjbEtleSIsInJ0IiwibGFzdENoaWxkIiwidG9wUmlnaHQiLCJ4IiwicnRLZXkiLCJzaGlmdCIsInNoaWZ0S2V5Iiwic2hpZnQyIiwiYm90dG9tUmlnaHQiLCJ5Iiwic2hpZnQyS2V5IiwiY3RybDEiLCJjdHJsMUtleSIsImFsdDEiLCJhbHQxS2V5IiwiY21kMSIsImNtZDFLZXkiLCJzcGFjZSIsInNwYWNlS2V5IiwiY21kMktleSIsImNsb25lIiwicmlnaHRDZW50ZXIiLCJhbHQyS2V5IiwiY3RybDIiLCJjdHJsMktleSIsImRlbFR5cGUiLCJQb2ludFRleHQiLCJqdXN0aWZpY2F0aW9uIiwiZm9udFNpemUiLCJmb250RmFtaWx5IiwiZmlsbENvbG9yIiwiY29udGVudCIsInJldHVyblR5cGUiLCJzdHJva2VDb2xvciIsIkNvbG9yIiwic3Ryb2tlV2lkdGgiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXQiLCJzdHJva2VDYXAiLCJzdHJva2VKb2luIiwiZ3JhZGllbnQiLCJzdG9wcyIsIm9yaWdpbiIsImxlZnRDZW50ZXIiLCJkZXN0aW5hdGlvbiIsImxlbmd0aCIsImNoaWxkcmVuIiwic21vb3RoIiwibG9jYXRlS2V5IiwiaW5kZXgiLCJwdXNoIiwic2VnbWVudHMiLCJzZW5kVG9QcmludGVyIiwicmVzZXRBbGwiLCJyZW1vdmVTZWdtZW50IiwicG9wIiwic3ZnIiwiZXhwb3J0U1ZHIiwiYXNTdHJpbmciLCJibG9iIiwiQmxvYiIsInNhdmVBcyIsImpvaW4iLCJyZW1vdmVTZWdtZW50cyIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiQUFBQSxR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LEtBQUF3RSxLQUFBYyxJQUFBLFlBQUF0RixLQUFBd0UsS0FBQWMsS0FDQXRGLEtBQUF3RSxLQUFBYyxHQUFBLElBS0EsSUFBQWtFLEdBQUEsd0NBQ0FBLElBQUEsNkdBQUE3SSxNQUFBbUQsS0FBQWEsT0FBQWxCLE1BQUEsYUFBQTlDLE1BQUFtRCxLQUFBYSxPQUFBaEIsT0FBQSxLQUNBNkYsR0FBQXhKLEtBQUFtRSxLQUFBc0YsV0FBQUMsVUFBQSxJQUNBRixHQUFBLFFBRUEsSUFBQUcsR0FBQSxHQUFBQyxPQUFBSixJQUNBbkYsS0FBQSxzQkFHQXdGLFFBQUFGLEVBQUEzSixLQUFBd0UsS0FBQXNGLEtBQUEsSUFBQSxTQUlBaEssU0FBQThDLFVBQUF5RyxTQUFBLFdBRUFySixLQUFBbUUsS0FBQTRGLGlCQUNBL0osS0FBQXdFLFNHMWFBdEUsU0FBQTRDLGlCQUFBLG1CQUFBLFdBRUFwQixRQUFBQyxJQUFBLE1BQ0FPLElBQUFyQixLQUFBWCxTQUFBOEosZUFBQSIsImZpbGUiOiJidW5kbGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gS2V5Ym9hcmQocGFyYW1ldGVycykge1xuXG5cdHRoaXMuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdtYWluJylbMF07XG5cdHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2NhbnZhcycpWzBdO1xuXG5cdHRoaXMua2V5TWFwID0gdW5kZWZpbmVkO1xuXHR0aGlzLnBhdGhQb2ludHMgPSBbXTtcblxuXHR0aGlzLmRlYnVnID0ge307XG5cdHRoaXMucHJvcHMgPSB7fTtcblxuXHRwYXBlci5zZXR1cCh0aGlzLmNhbnZhcyk7XG5cdFxuXHR0aGlzLmluaXQoKTtcblx0dGhpcy5kcmF3KCk7XG5cbn1cblxuS2V5Ym9hcmQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcblxuXHR0aGlzLmtleU1hcCA9IFtcblx0XHRcImBcIixcblx0XHRcIjFcIixcblx0XHRcIjJcIixcblx0XHRcIjNcIixcblx0XHRcIjRcIixcblx0XHRcIjVcIixcblx0XHRcIjZcIixcblx0XHRcIjdcIixcblx0XHRcIjhcIixcblx0XHRcIjlcIixcblx0XHRcIjBcIixcblx0XHRcIi1cIixcblx0XHRcIj1cIixcblx0XHRcImJhY2tzcGFjZVwiLFxuXHRcdFwidGFiXCIsXG5cdFx0XCJxXCIsXG5cdFx0XCJ3XCIsXG5cdFx0XCJlXCIsXG5cdFx0XCJyXCIsXG5cdFx0XCJ0XCIsXG5cdFx0XCJ5XCIsXG5cdFx0XCJ1XCIsXG5cdFx0XCJpXCIsXG5cdFx0XCJvXCIsXG5cdFx0XCJwXCIsXG5cdFx0XCJbXCIsXG5cdFx0XCJdXCIsXG5cdFx0XCJcXFxcXCIsXG5cdFx0XCJjYXBzbG9ja1wiLFxuXHRcdFwiYVwiLFxuXHRcdFwic1wiLFxuXHRcdFwiZFwiLFxuXHRcdFwiZlwiLFxuXHRcdFwiZ1wiLFxuXHRcdFwiaFwiLFxuXHRcdFwialwiLFxuXHRcdFwia1wiLFxuXHRcdFwibFwiLFxuXHRcdFwiO1wiLFxuXHRcdFwiJ1wiLFxuXHRcdFwiZW50ZXJcIixcblx0XHRcInNoaWZ0XCIsIC8vIExcblx0XHRcInpcIixcblx0XHRcInhcIixcblx0XHRcImNcIixcblx0XHRcInZcIixcblx0XHRcImJcIixcblx0XHRcIm5cIixcblx0XHRcIm1cIixcblx0XHRcIixcIixcblx0XHRcIi5cIixcblx0XHRcIi9cIixcblx0XHRcIi8vc2hpZnRcIiwgLy8gUlxuXHRcdFwiY29udHJvbFwiLCAvLyBMXG5cdFx0XCJhbHRcIiwgLy8gTFxuXHRcdFwibWV0YVwiLCAvLyBMXG5cdFx0XCIgXCIsIC8vIFNwYWNlYmFyXG5cdFx0XCIvL21ldGFcIiwgLy8gUlxuXHRcdFwiLy9hbHRcIiwgLy8gUlxuXHRcdFwiLy9jb250cm9sXCIgLy8gUlxuXHRdXG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7XG5cdFx0dGhpcy5vbktleURvd24oZS5rZXkudG9Mb3dlckNhc2UoKSwgZS5sb2NhdGlvbik7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9LmJpbmQodGhpcykpO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcblx0XHR0aGlzLm9uS2V5VXAoZS5rZXkudG9Mb3dlckNhc2UoKSwgZS5sb2NhdGlvbik7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9LmJpbmQodGhpcykpO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbihlKSB7XG5cdFx0dGhpcy5kcmF3KCk7XG5cdH0uYmluZCh0aGlzKSk7XG5cbn1cblxuS2V5Ym9hcmQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHtcblxuXHRjb25zb2xlLmxvZyhcImRyYXdcIik7XG5cblx0cGFwZXIucHJvamVjdC5hY3RpdmVMYXllci5yZW1vdmVDaGlsZHJlbigpO1xuXG5cdC8vIFZpZXcgcmVzaXplXG5cdHRoaXMuY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cdHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0dGhpcy5jYW52YXMuc3R5bGUgPSAnJztcblx0cGFwZXIudmlldy52aWV3U2l6ZSA9IG5ldyBwYXBlci5TaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuXG5cdC8vIEluaXQgVUlcblx0dGhpcy5rZXlib2FyZCA9IG5ldyBwYXBlci5Hcm91cCgpO1xuXHR0aGlzLnBhdGggPSBuZXcgcGFwZXIuUGF0aCgpO1xuXHR0aGlzLnR5cGUgPSBuZXcgcGFwZXIuR3JvdXAoKTtcblx0dGhpcy5ncmFwaGljcyA9IG5ldyBwYXBlci5Hcm91cChbdGhpcy5rZXlib2FyZCwgdGhpcy5wYXRoLCB0aGlzLnR5cGVdKTtcblx0dGhpcy5ncmFwaGljcy5icmluZ1RvRnJvbnQoKTtcblx0dGhpcy50ZXh0ID0gW107XG5cblx0Ly8gRGVidWdcblx0dGhpcy5kZWJ1Zy5ib3VuZGluZ0JveCA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZSh0aGlzLmtleWJvYXJkLmJvdW5kcyk7XG5cdHRoaXMuZGVidWcuYm91bmRpbmdCb3gucG9zaXRpb24gPSBwYXBlci52aWV3LmNlbnRlcjtcblxuXHQvLyBEcmF3IFVJXG5cdHRoaXMuZHJhd0tleWJvYXJkKCk7XG5cdHRoaXMuZHJhd1BhdGgoKTtcblxuXHQvLyBSZXNwb25zaXZlXG5cdHRoaXMuZ3JhcGhpY3MucG9zaXRpb24gPSBwYXBlci52aWV3LmNlbnRlcjtcblxuXHRwYXBlci52aWV3LmRyYXcoKTtcblxufVxuXG5LZXlib2FyZC5wcm90b3R5cGUuZHJhd0tleWJvYXJkID0gZnVuY3Rpb24ocHJvcHMpIHtcblxuXHQvLyBNQURORVNTXG5cblx0dmFyIGtleWJvYXJkV2lkdGggPSBNYXRoLnJvdW5kKHBhcGVyLnZpZXcuYm91bmRzLndpZHRoKjAuOSk7XG5cdHZhciBtYXJnaW4gPSBNYXRoLnJvdW5kKHBhcGVyLnZpZXcuYm91bmRzLndpZHRoKjAuMDA3KTtcblx0dmFyIGtleVNpemUgPSBNYXRoLnJvdW5kKCAoa2V5Ym9hcmRXaWR0aCAtIDEzKm1hcmdpbikgLyAxNS41ICk7XG5cdHZhciB0eXBlU2l6ZSA9IHBhcGVyLnZpZXcuYm91bmRzLndpZHRoKjAuMDE1O1xuXG5cdC8vIERyYXcgZmlyc3QgbGluZVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IDEzOyBpKyspIHtcblx0XHR2YXIgcGF0aCA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KGkqKGtleVNpemUgKyBtYXJnaW4pLCAwKSwga2V5U2l6ZSk7XG5cdFx0dmFyIGtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShwYXRoLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdFx0dGhpcy5rZXlib2FyZC5hZGRDaGlsZChrZXkpO1xuXHR9XG5cblx0Ly8gRGVsIGtleSBpcyAxLjV4IHdpZGVyIHRoYW4gYSBLZXlcblx0dmFyIGRlbCA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KDEzKihrZXlTaXplICsgbWFyZ2luKSwgMCksIG5ldyBwYXBlci5TaXplKGtleVNpemUqMS41LCBrZXlTaXplKSk7XG5cdHZhciBkZWxLZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUoZGVsLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoZGVsS2V5KTtcblxuXHQvLyBUYWIga2V5IGlzIDEuNXggd2lkZXIgdGhhbiBhIEtleVxuXHR2YXIgdGFiID0gbmV3IHBhcGVyLlJlY3RhbmdsZShuZXcgcGFwZXIuUG9pbnQoMCwga2V5U2l6ZSArIG1hcmdpbiksIG5ldyBwYXBlci5TaXplKGtleVNpemUqMS41LCBrZXlTaXplKSk7XG5cdHZhciB0YWJLZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUodGFiLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQodGFiS2V5KTtcblxuXHQvLyBEcmF3IHNlY29uZCBsaW5lXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgMTM7IGkrKykge1xuXHRcdHZhciBwYXRoID0gbmV3IHBhcGVyLlJlY3RhbmdsZShuZXcgcGFwZXIuUG9pbnQoaSooa2V5U2l6ZSArIG1hcmdpbikgKyB0YWJLZXkuYm91bmRzLndpZHRoICsgbWFyZ2luLCBrZXlTaXplICsgbWFyZ2luKSwga2V5U2l6ZSk7XG5cdFx0dmFyIGtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShwYXRoLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdFx0dGhpcy5rZXlib2FyZC5hZGRDaGlsZChrZXkpO1xuXHR9XG5cblx0Ly8gQ2Fwc2xvY2sga2V5IGlzIDEuNXggd2lkZXIgdGhhbiBhIEtleSArIG1hcmdpblxuXHR2YXIgY2wgPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludCgwLCAoa2V5U2l6ZSArIG1hcmdpbikgKiAyKSwgbmV3IHBhcGVyLlNpemUoa2V5U2l6ZSoxLjUgKyBtYXJnaW4sIGtleVNpemUpKTtcblx0dmFyIGNsS2V5ID0gbmV3IHBhcGVyLlBhdGguUmVjdGFuZ2xlKGNsLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoY2xLZXkpO1xuXG5cdC8vIERyYXcgdGhpcmQgbGluZVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IDExOyBpKyspIHtcblx0XHR2YXIgcGF0aCA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KGkqKGtleVNpemUgKyBtYXJnaW4pICsgY2xLZXkuYm91bmRzLndpZHRoICsgbWFyZ2luLCAoa2V5U2l6ZSArIG1hcmdpbikgKiAyKSwga2V5U2l6ZSk7XG5cdFx0dmFyIGtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShwYXRoLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdFx0dGhpcy5rZXlib2FyZC5hZGRDaGlsZChrZXkpO1xuXHR9XG5cblx0Ly8gUmV0dXJuIGtleSBpcyAyeCB3aWRlciB0aGFuIGEgS2V5XG5cdHZhciBydCA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KHRoaXMua2V5Ym9hcmQubGFzdENoaWxkLmJvdW5kcy50b3BSaWdodC54ICsgbWFyZ2luLCAoa2V5U2l6ZSArIG1hcmdpbikgKiAyKSwgbmV3IHBhcGVyLlNpemUoa2V5U2l6ZSoyLCBrZXlTaXplKSk7XG5cdHZhciBydEtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShydCwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKHJ0S2V5KTtcblxuXHQvLyBTaGlmdCBrZXkgaXMgMnggd2lkZXIgdGhhbiBhIEtleSArIDIgeCBtYXJnaW5cblx0dmFyIHNoaWZ0ID0gbmV3IHBhcGVyLlJlY3RhbmdsZShuZXcgcGFwZXIuUG9pbnQoMCwgKGtleVNpemUgKyBtYXJnaW4pICogMyksIG5ldyBwYXBlci5TaXplKGtleVNpemUqMiArIDIgKiBtYXJnaW4sIGtleVNpemUpKTtcblx0dmFyIHNoaWZ0S2V5ID0gbmV3IHBhcGVyLlBhdGguUmVjdGFuZ2xlKHNoaWZ0LCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoc2hpZnRLZXkpO1xuXG5cdC8vIERyYXcgZm91cnRoIGxpbmVcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG5cdFx0dmFyIHBhdGggPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludChpKihrZXlTaXplICsgbWFyZ2luKSArIHNoaWZ0S2V5LmJvdW5kcy53aWR0aCArIG1hcmdpbiwgKGtleVNpemUgKyBtYXJnaW4pICogMyksIGtleVNpemUpO1xuXHRcdHZhciBrZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUocGF0aCwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHRcdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoa2V5KTtcblx0fVxuXG5cdC8vIFNoaWZ0IGtleSBpcyAyeCB3aWRlciB0aGFuIGEgS2V5ICsgMiB4IG1hcmdpblxuXHR2YXIgc2hpZnQyID0gbmV3IHBhcGVyLlJlY3RhbmdsZShuZXcgcGFwZXIuUG9pbnQodGhpcy5rZXlib2FyZC5sYXN0Q2hpbGQuYm91bmRzLnRvcFJpZ2h0LnggKyBtYXJnaW4sIChrZXlTaXplICsgbWFyZ2luKSAqIDMpLCBuZXcgcGFwZXIuUG9pbnQocnRLZXkuYm91bmRzLmJvdHRvbVJpZ2h0LngsIHJ0S2V5LmJvdW5kcy5ib3R0b21SaWdodC55ICsgbWFyZ2luICsga2V5U2l6ZSkpO1xuXHR2YXIgc2hpZnQyS2V5ID0gbmV3IHBhcGVyLlBhdGguUmVjdGFuZ2xlKHNoaWZ0MiwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKHNoaWZ0MktleSk7XG5cblx0Ly8gQ3RybDEga2V5IGlzIDEuNXggd2lkZXIgdGhhbiBhIEtleVxuXHR2YXIgY3RybDEgPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludCgwLCAoa2V5U2l6ZSArIG1hcmdpbikgKiA0KSwgbmV3IHBhcGVyLlNpemUoa2V5U2l6ZSoxLjUsIGtleVNpemUpKTtcblx0dmFyIGN0cmwxS2V5ID0gbmV3IHBhcGVyLlBhdGguUmVjdGFuZ2xlKGN0cmwxLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoY3RybDFLZXkpO1xuXG5cdC8vIEFsdDEga2V5IGlzIDF4IGtleSArIDF4IG1hcmdpblxuXHR2YXIgYWx0MSA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KDEuNSprZXlTaXplICsgbWFyZ2luLCAoa2V5U2l6ZSArIG1hcmdpbikgKiA0KSwgbmV3IHBhcGVyLlNpemUoa2V5U2l6ZSArIG1hcmdpbiwga2V5U2l6ZSkpO1xuXHR2YXIgYWx0MUtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShhbHQxLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoYWx0MUtleSk7XG5cblx0Ly8gQ29tbWFuZDEga2V5IGlzIDRrZXkgKyA1bWFyZ2luc1xuXHR2YXIgY21kMSA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KHRoaXMua2V5Ym9hcmQubGFzdENoaWxkLmJvdW5kcy50b3BSaWdodC54ICsgbWFyZ2luLCAoa2V5U2l6ZSArIG1hcmdpbikgKiA0KSwgbmV3IHBhcGVyLlBvaW50KGtleVNpemUqNCArIG1hcmdpbio1IC0gbWFyZ2luLCAoa2V5U2l6ZSArIG1hcmdpbikgKiA0ICsga2V5U2l6ZSkpO1xuXHR2YXIgY21kMUtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShjbWQxLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoY21kMUtleSk7XG5cblx0Ly8gU3BhY2Uga2V5IGlzIDZ4IGtleSArIDV4IG1hcmdpblxuXHR2YXIgc3BhY2UgPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludCg0KmtleVNpemUgKyA1Km1hcmdpbiwgKGtleVNpemUgKyBtYXJnaW4pICogNCksIG5ldyBwYXBlci5TaXplKDYqa2V5U2l6ZSArIDUqbWFyZ2luLCBrZXlTaXplKSk7XG5cdHZhciBzcGFjZUtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShzcGFjZSwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKHNwYWNlS2V5KTtcblxuXHR2YXIgY21kMktleSA9IGNtZDFLZXkuY2xvbmUoKTtcblx0Y21kMktleS5wb3NpdGlvbi54ID0gc3BhY2VLZXkuYm91bmRzLnJpZ2h0Q2VudGVyLnggKyBjbWQxS2V5LmJvdW5kcy53aWR0aC8yICsgbWFyZ2luO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKGNtZDJLZXkpO1xuXG5cdHZhciBhbHQyS2V5ID0gYWx0MUtleS5jbG9uZSgpO1xuXHRhbHQyS2V5LnBvc2l0aW9uLnggPSB0aGlzLmtleWJvYXJkLmxhc3RDaGlsZC5ib3VuZHMudG9wUmlnaHQueCArIGFsdDFLZXkuYm91bmRzLndpZHRoLzIgKyBtYXJnaW47XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoYWx0MktleSk7XG5cblx0Ly8gQ3RybDIga2V5IGNvbXBsZXRlcyB0aGUgbGF5b3V0XG5cdHZhciBjdHJsMiA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KHRoaXMua2V5Ym9hcmQubGFzdENoaWxkLmJvdW5kcy50b3BSaWdodC54ICsgbWFyZ2luLCAoa2V5U2l6ZSArIG1hcmdpbikgKiA0KSwgbmV3IHBhcGVyLlBvaW50KHNoaWZ0MktleS5ib3VuZHMuYm90dG9tUmlnaHQueCwgc2hpZnQyS2V5LmJvdW5kcy5ib3R0b21SaWdodC55ICsgbWFyZ2luICsga2V5U2l6ZSkpO1xuXHR2YXIgY3RybDJLZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUoY3RybDIsIG5ldyBwYXBlci5TaXplKDQsIDQpKTtcblx0dGhpcy5rZXlib2FyZC5hZGRDaGlsZChjdHJsMktleSk7XG5cblx0Ly8gVHlwZVxuXHR2YXIgZGVsVHlwZSA9IG5ldyBwYXBlci5Qb2ludFRleHQobmV3IHBhcGVyLlBvaW50KGRlbEtleS5ib3VuZHMuYm90dG9tUmlnaHQueCAtIG1hcmdpbiwgZGVsS2V5LmJvdW5kcy5ib3R0b21SaWdodC55IC0gbWFyZ2luKSk7XG5cdGRlbFR5cGUuanVzdGlmaWNhdGlvbiA9ICdyaWdodCc7XG5cdGRlbFR5cGUuZm9udFNpemUgPSB0eXBlU2l6ZTtcblx0ZGVsVHlwZS5mb250RmFtaWx5PSAnUm9ib3RvJztcblx0ZGVsVHlwZS5maWxsQ29sb3IgPSAnd2hpdGUnO1xuXHRkZWxUeXBlLmNvbnRlbnQgPSAnZGVsJztcblx0dGhpcy50eXBlLmFkZENoaWxkKGRlbFR5cGUpO1xuXG5cdHZhciByZXR1cm5UeXBlID0gbmV3IHBhcGVyLlBvaW50VGV4dChuZXcgcGFwZXIuUG9pbnQocnRLZXkuYm91bmRzLmJvdHRvbVJpZ2h0LnggLSBtYXJnaW4sIHJ0S2V5LmJvdW5kcy5ib3R0b21SaWdodC55IC0gbWFyZ2luKSk7XG5cdHJldHVyblR5cGUuanVzdGlmaWNhdGlvbiA9ICdyaWdodCc7XG5cdHJldHVyblR5cGUuZm9udFNpemUgPSB0eXBlU2l6ZTtcblx0cmV0dXJuVHlwZS5mb250RmFtaWx5PSAnUm9ib3RvJztcblx0cmV0dXJuVHlwZS5maWxsQ29sb3IgPSAnd2hpdGUnO1xuXHRyZXR1cm5UeXBlLmNvbnRlbnQgPSAncmV0dXJuJztcblx0dGhpcy50eXBlLmFkZENoaWxkKHJldHVyblR5cGUpO1xuXG5cdGlmKHBhcGVyLnZpZXcuYm91bmRzLndpZHRoIDwgMTAwMCkge1xuXHRcdHJldHVyblR5cGUuY29udGVudCA9IFwi4oCiXCI7XG5cdFx0ZGVsVHlwZS5jb250ZW50ID0gXCLihpBcIjtcblx0fVxuXG5cdHRoaXMua2V5Ym9hcmQuc3R5bGUgPSB7XG5cdFx0ZmlsbENvbG9yOiBcIiM4MDgwODBcIixcblx0XHRzdHJva2VDb2xvcjogbmV3IHBhcGVyLkNvbG9yKDEsMSwxLDAuNCksXG5cdFx0c3Ryb2tlV2lkdGg6IDEuNSxcblx0XHRzaGFkb3dDb2xvcjogbmV3IHBhcGVyLkNvbG9yKDAsMCwwLDAuNDUpLFxuXHRcdHNoYWRvd0JsdXI6IDQsXG5cdFx0c2hhZG93T2Zmc2V0OiBuZXcgcGFwZXIuUG9pbnQoMCwgMilcblx0fVxuXG59XG5cbktleWJvYXJkLnByb3RvdHlwZS5kcmF3UGF0aCA9IGZ1bmN0aW9uKCkge1xuXG5cdHZhciBzdHJva2VXaWR0aCA9IHBhcGVyLnZpZXcuYm91bmRzLndpZHRoKjAuMDA0ICsgMTtcblxuXHR0aGlzLnBhdGguc3R5bGUgPSB7XG5cdFx0c3Ryb2tlV2lkdGggOiBzdHJva2VXaWR0aCxcblx0XHRmaWxsQ29sb3I6IG5ldyBwYXBlci5Db2xvcigwLDAsMCwwKSxcblx0XHRzdHJva2VDYXAgOiAncm91bmQnLFxuXHRcdHN0cm9rZUpvaW4gOiAncm91bmQnXG5cdH1cblxuXHR0aGlzLnBhdGguc3Ryb2tlQ29sb3IgPSB7XG5cdFx0Z3JhZGllbnQ6IHtcblx0XHRcdHN0b3BzOiBbbmV3IHBhcGVyLkNvbG9yKCcjMDBGRkY0JyksIG5ldyBwYXBlci5Db2xvcignIzFGMDBGRicpXVxuXHRcdH0sXG5cdFx0b3JpZ2luOiBwYXBlci52aWV3LmJvdW5kcy5sZWZ0Q2VudGVyLFxuXHRcdGRlc3RpbmF0aW9uOiBwYXBlci52aWV3LmJvdW5kcy5yaWdodENlbnRlclxuXHR9XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPD0gdGhpcy5wYXRoUG9pbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuXHRcdHRoaXMucGF0aC5hZGQodGhpcy5rZXlib2FyZC5jaGlsZHJlblt0aGlzLnBhdGhQb2ludHNbaV1dLmJvdW5kcy5jZW50ZXIpO1xuXHR9XG5cdFxuXHR0aGlzLnBhdGguc21vb3RoKCk7XG5cbn1cblxuS2V5Ym9hcmQucHJvdG90eXBlLmxvY2F0ZUtleSA9IGZ1bmN0aW9uKGtleSwgbG9jYXRpb24pIHtcblxuXHR2YXIgaW5kZXggPSBudWxsXG5cblx0aWYobG9jYXRpb24gPT0gMSB8fCBsb2NhdGlvbiA9PSAwKSB7XG5cblx0XHQvLyBMZWZ0IHNpZGVcblx0XHRcblx0XHRmb3IgKHZhciBpID0gdGhpcy5rZXlNYXAubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdGlmKHRoaXMua2V5TWFwW2ldID09IGtleSkgaW5kZXggPSBpO1xuXHRcdH1cblxuXHRcdGlmKGluZGV4ID09IG51bGwpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdObyBtYXRjaCcpO1xuXHRcdH1cblxuXHR9XG5cdGVsc2UgaWYobG9jYXRpb24gPT0gMikge1xuXG5cdFx0Ly8gUmlnaHQgc2lkZVxuXG5cdFx0aWYoa2V5ID09IFwibWV0YVwiKSB7XG5cdFx0XHRpbmRleCA9IDU3O1xuXHRcdH1cblxuXHRcdGlmKGtleSA9PSBcImFsdFwiKSB7XG5cdFx0XHRpbmRleCA9IDU4O1xuXHRcdH1cblxuXHRcdGlmKGtleSA9PSBcImNvbnRyb2xcIikge1xuXHRcdFx0aW5kZXggPSA1OTtcblx0XHR9XG5cblx0XHRpZihrZXkgPT0gXCJzaGlmdFwiKSB7XG5cdFx0XHRpbmRleCA9IDUyO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIGluZGV4O1xuXG59XG5cbktleWJvYXJkLnByb3RvdHlwZS5vbktleURvd24gPSBmdW5jdGlvbihrZXksIGxvY2F0aW9uKSB7XG5cblx0dmFyIGluZGV4ID0gdGhpcy5sb2NhdGVLZXkoa2V5LCBsb2NhdGlvbik7XG5cblx0dGhpcy5wYXRoUG9pbnRzLnB1c2goaW5kZXgpO1xuXG5cdHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5baW5kZXhdLnNoYWRvd0NvbG9yID0gbmV3IHBhcGVyLkNvbG9yKDAsMCwwLDAuMik7XG5cdHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5baW5kZXhdLnNoYWRvd0JsdXIgPSAxO1xuXHR0aGlzLmtleWJvYXJkLmNoaWxkcmVuW2luZGV4XS5zaGFkb3dPZmZzZXQgPSBuZXcgcGFwZXIuUG9pbnQoMCwgMSk7XG5cblx0aWYoa2V5ID09IFwiYmFja3NwYWNlXCIpIHtcblx0XHR0aGlzLmRlbGV0ZSgpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmKGtleSA9PSBcImVudGVyXCIpIHtcblx0XHRwYXBlci52aWV3LmRyYXcoKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHR0aGlzLnBhdGguYWRkKHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5baW5kZXhdLmJvdW5kcy5jZW50ZXIpO1xuXHR0aGlzLnBhdGguc21vb3RoKCk7XG5cblx0dGhpcy50ZXh0LnB1c2goa2V5KTtcblxuXHRwYXBlci52aWV3LmRyYXcoKTtcblxufVxuXG5LZXlib2FyZC5wcm90b3R5cGUub25LZXlVcCA9IGZ1bmN0aW9uKGtleSwgbG9jYXRpb24pIHtcblxuXHRmb3IgKHZhciBpID0gdGhpcy5rZXlib2FyZC5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFxuXHRcdHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5baV0uc2hhZG93Q29sb3IgPSBuZXcgcGFwZXIuQ29sb3IoMCwwLDAsMC40NSk7XG5cdFx0dGhpcy5rZXlib2FyZC5jaGlsZHJlbltpXS5zaGFkb3dCbHVyID0gNDtcblx0XHR0aGlzLmtleWJvYXJkLmNoaWxkcmVuW2ldLnNoYWRvd09mZnNldCA9IG5ldyBwYXBlci5Qb2ludCgwLCAyKTtcblxuXHR9XG5cblx0aWYoa2V5ID09IFwiZW50ZXJcIikge1xuXHRcdGlmKHRoaXMucGF0aC5zZWdtZW50cy5sZW5ndGggPiAxKSB7XG5cdFx0XHR0aGlzLnNlbmRUb1ByaW50ZXIoKTtcblx0XHRcdHRoaXMucmVzZXRBbGwoKTtcblx0XHR9XG5cdH1cblxuXHRwYXBlci52aWV3LmRyYXcoKTtcbn1cblxuS2V5Ym9hcmQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXG5cdHRoaXMucGF0aC5yZW1vdmVTZWdtZW50KHRoaXMucGF0aC5zZWdtZW50cy5sZW5ndGgtMSk7XG5cblx0Y29uc29sZS5sb2codGhpcy5wYXRoUG9pbnRzKTtcblxuXHR0aGlzLnBhdGhQb2ludHMucG9wKCk7XG5cdGNvbnNvbGUubG9nKHRoaXMucGF0aFBvaW50cyk7XG5cdHRoaXMudGV4dC5wb3AoKTtcblxuXHRwYXBlci52aWV3LmRyYXcoKTtcblxufVxuXG5LZXlib2FyZC5wcm90b3R5cGUuc2VuZFRvUHJpbnRlciA9IGZ1bmN0aW9uKCkge1xuXG5cdC8vIEZvcm1hdCB0ZXh0IGZvciBleHBvcnRpbmdcblx0Zm9yICh2YXIgaSA9IHRoaXMudGV4dC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdGlmKHRoaXMudGV4dFtpXSA9PSAnbWV0YScgfHwgdGhpcy50ZXh0W2ldID09ICdjb250cm9sJyB8fCB0aGlzLnRleHRbaV0gPT0gJ2FsdCcgfHwgdGhpcy50ZXh0W2ldID09ICdzaGlmdCcgfHwgdGhpcy50ZXh0W2ldID09ICd0YWInIHx8IHRoaXMudGV4dFtpXSA9PSAnY2Fwc2xvY2snKSB7XG5cdFx0XHR0aGlzLnRleHRbaV0gPSAn4paRJztcblx0XHR9XG5cdH1cblxuXHQvLyBGb3JtYXQgc3ZnIGZvciBzYXZpbmdcblx0dmFyIHN2ZyA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJ1dGYtOFwiPz4nO1xuXHRzdmcgKz0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHg9XCIwcHhcIiB5PVwiMHB4XCIgd2lkdGg9XCInICsgcGFwZXIudmlldy5ib3VuZHMud2lkdGggKyAnXCIgaGVpZ2h0PVwiJyArIHBhcGVyLnZpZXcuYm91bmRzLmhlaWdodCArICdcIj4nO1xuXHRzdmcgKz0gdGhpcy5wYXRoLmV4cG9ydFNWRyh7IGFzU3RyaW5nOiB0cnVlIH0pO1xuXHRzdmcgKz0gJzwvc3ZnPic7XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbc3ZnXSwge1xuXHRcdHR5cGU6ICdkYXRhOmltYWdlL3N2Zyt4bWwnXG5cdH0pO1xuXG5cdHNhdmVBcyhibG9iLCB0aGlzLnRleHQuam9pbignJykgKyAnLnN2ZycpO1xuXG59XG5cbktleWJvYXJkLnByb3RvdHlwZS5yZXNldEFsbCA9IGZ1bmN0aW9uKCkge1xuXG5cdHRoaXMucGF0aC5yZW1vdmVTZWdtZW50cygpO1xuXHR0aGlzLnRleHQgPSBbXTtcblxufSIsInZhciBMb2FkZXIgPSB7XG5cblx0cXVldWUgOiB1bmRlZmluZWQsXG5cblx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5xdWV1ZSA9IG5ldyBjcmVhdGVqcy5Mb2FkUXVldWUoKTtcblx0XHR0aGlzLnF1ZXVlLm9uKCdjb21wbGV0ZScsIHRoaXMub25Mb2FkQ29tcGxldGVkKTtcblx0XHR0aGlzLnF1ZXVlLm9uKCdlcnJvcicsIHRoaXMub25Mb2FkRXJyb3IpO1xuXHRcdHRoaXMucXVldWUub24oJ3Byb2dyZXNzJywgdGhpcy5vbkxvYWRQcm9ncmVzcyk7XG5cdH0sXG5cblx0bG9hZDogZnVuY3Rpb24obWFuaWZlc3QsIG9uTG9hZGVkKSB7XG5cdFx0Y29uc29sZS5sb2coJ0xvYWRpbmc6JywgbWFuaWZlc3RbMF0uc3JjKTtcblx0XHR2YXIgcSA9IHRoaXMucXVldWU7XG5cdFx0cS5vbignY29tcGxldGUnLCBvbkxvYWRlZCk7XG5cdFx0cS5sb2FkTWFuaWZlc3QobWFuaWZlc3QpO1xuXHR9LFxuXG5cdGdldENvbnRlbnRCeUlkOiBmdW5jdGlvbihpZCkge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlLmdldFJlc3VsdChpZCk7XG5cdH0sXG5cblx0b25Mb2FkQ29tcGxldGVkOiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLmxvZygnTG9hZCBDb21wbGV0ZWQnKTtcblx0fSxcblxuXHRvbkxvYWRFcnJvcjogZnVuY3Rpb24oKSB7XG5cdFx0Y29uc29sZS5sb2coJ0xvYWQgRXJyb3InKTtcblx0fSxcblxuXHRvbkxvYWRQcm9ncmVzczogZnVuY3Rpb24oKSB7XG5cdFx0Y29uc29sZS5sb2coJy4nKTtcblx0fSxcblx0XG59OyIsInZhciBBcHAgPSB7XG5cblx0Y29udGFpbmVyOiB1bmRlZmluZWQsXG5cblx0aW5pdDogZnVuY3Rpb24oY29udGFpbmVyKSB7XG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG5cdFx0TG9hZGVyLmluaXQoKTtcblx0XHR0aGlzLmluaXRpYWxMb2FkKCk7XG5cdH0sXG5cblx0aW5pdGlhbExvYWQ6IGZ1bmN0aW9uKCkge1xuXHRcdExvYWRlci5sb2FkKFtcblx0XHRcdHtpZDogJ2hvbWVwYWdlJywgc3JjOiAnZGF0YS9ob21lcGFnZS5odG1sJ31cblx0XHRdLCB0aGlzLmxvYWRDb21wbGV0ZWQuYmluZCh0aGlzKSk7IC8vIEJpbmRpbmcgYWxsb3dzIHRvIGtlZXAgdGhlIEFwcCBzY29wZSBvbiBjYWxsYmFja1xuXHR9LFxuXG5cdGxvYWRDb21wbGV0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IExvYWRlci5nZXRDb250ZW50QnlJZCgnaG9tZXBhZ2UnKTtcblx0XHR0aGlzLmluaXRpYWxUcmFuc2l0aW9uSW4oKTtcblx0fSxcblxuXHRpbml0aWFsVHJhbnNpdGlvbkluOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmYWRlLWluJyk7XG5cdFx0Y29uc29sZS5sb2coJ1tQQU5dIOKYke+4jycpO1xuXHRcdEtleWJvYXJkID0gbmV3IEtleWJvYXJkKCk7XG5cdH0sXG5cblx0ZGlzcG9zZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG5cdH1cblxufTsiLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpIHtcblxuXHRjb25zb2xlLmxvZygn8J+RuycpO1xuXHRBcHAuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJykpO1xuXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
