function Keyboard(e){this.el=document.querySelectorAll("main")[0],this.canvas=document.getElementsByTagName("canvas")[0],this.keyMap=void 0,this.debug={},this.props={},paper.setup(this.canvas),this.attachEvents(),this.draw()}var Loader={queue:void 0,init:function(){this.queue=new createjs.LoadQueue,this.queue.on("complete",this.onLoadCompleted),this.queue.on("error",this.onLoadError),this.queue.on("progress",this.onLoadProgress)},load:function(e,t){console.log("Loading:",e[0].src);var n=this.queue;n.on("complete",t),n.loadManifest(e)},getContentById:function(e){return this.queue.getResult(e)},onLoadCompleted:function(){console.log("Load Completed")},onLoadError:function(){console.log("Load Error")},onLoadProgress:function(){console.log(".")}},App={container:void 0,init:function(e){this.container=e,Loader.init(),this.initialLoad()},initialLoad:function(){Loader.load([{id:"homepage",src:"data/homepage.html"}],this.loadCompleted.bind(this))},loadCompleted:function(){this.container.innerHTML=Loader.getContentById("homepage"),this.initialTransitionIn()},initialTransitionIn:function(){this.container.classList.add("fade-in"),console.log("[PAN] ‚òëÔ∏è"),Keyboard=new Keyboard},dispose:function(){this.container.innerHTML=""}};Keyboard.prototype.attachEvents=function(){window.addEventListener("resize",function(e){this.draw()}.bind(this))},Keyboard.prototype.draw=function(){paper.project.activeLayer.removeChildren(),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.style="",paper.view.viewSize=new paper.Size(window.innerWidth,window.innerHeight),this.keyboard=new paper.Group,this.path=new paper.Path,this.type=new paper.Group,this.graphics=new paper.Group([this.keyboard,this.path,this.type]),this.graphics.bringToFront(),this.drawKeyboard(),this.graphics.position=paper.view.center,this.debug.boundingBox=new paper.Path.Rectangle(this.keyboard.bounds),this.debug.boundingBox.position=paper.view.center,paper.view.draw()},Keyboard.prototype.drawKeyboard=function(e){for(var t=Math.round(.9*paper.view.bounds.width),n=Math.round(.007*paper.view.bounds.width),o=Math.round((t-13*n)/15.5),a=.015*paper.view.bounds.width,i=0;i<13;i++){var r=new paper.Rectangle(new paper.Point(i*(o+n),0),o),p=new paper.Path.Rectangle(r,new paper.Size(4,4));this.keyboard.addChild(p)}var d=new paper.Rectangle(new paper.Point(13*(o+n),0),new paper.Size(1.5*o,o)),h=new paper.Path.Rectangle(d,new paper.Size(4,4));this.keyboard.addChild(h);var s=new paper.Rectangle(new paper.Point(0,o+n),new paper.Size(1.5*o,o)),l=new paper.Path.Rectangle(s,new paper.Size(4,4));this.keyboard.addChild(l);for(var i=0;i<13;i++){var r=new paper.Rectangle(new paper.Point(i*(o+n)+l.bounds.width+n,o+n),o),p=new paper.Path.Rectangle(r,new paper.Size(4,4));this.keyboard.addChild(p)}var w=new paper.Rectangle(new paper.Point(0,2*(o+n)),new paper.Size(1.5*o+n,o)),c=new paper.Path.Rectangle(w,new paper.Size(4,4));this.keyboard.addChild(c);for(var i=0;i<11;i++){var r=new paper.Rectangle(new paper.Point(i*(o+n)+c.bounds.width+n,2*(o+n)),o),p=new paper.Path.Rectangle(r,new paper.Size(4,4));this.keyboard.addChild(p)}var g=new paper.Rectangle(new paper.Point(this.keyboard.lastChild.bounds.topRight.x+n,2*(o+n)),new paper.Size(2*o,o)),u=new paper.Path.Rectangle(g,new paper.Size(4,4));this.keyboard.addChild(u);var b=new paper.Rectangle(new paper.Point(0,3*(o+n)),new paper.Size(2*o+2*n,o)),y=new paper.Path.Rectangle(b,new paper.Size(4,4));this.keyboard.addChild(y);for(var i=0;i<10;i++){var r=new paper.Rectangle(new paper.Point(i*(o+n)+y.bounds.width+n,3*(o+n)),o),p=new paper.Path.Rectangle(r,new paper.Size(4,4));this.keyboard.addChild(p)}var v=new paper.Rectangle(new paper.Point(this.keyboard.lastChild.bounds.topRight.x+n,3*(o+n)),new paper.Point(u.bounds.bottomRight.x,u.bounds.bottomRight.y+n+o)),f=new paper.Path.Rectangle(v,new paper.Size(4,4));this.keyboard.addChild(f);var C=new paper.Rectangle(new paper.Point(0,4*(o+n)),new paper.Size(1.5*o,o)),P=new paper.Path.Rectangle(C,new paper.Size(4,4));this.keyboard.addChild(P);var k=new paper.Rectangle(new paper.Point(1.5*o+n,4*(o+n)),new paper.Size(o+n,o)),R=new paper.Path.Rectangle(k,new paper.Size(4,4));this.keyboard.addChild(R);var m=new paper.Rectangle(new paper.Point(this.keyboard.lastChild.bounds.topRight.x+n,4*(o+n)),new paper.Point(4*o+5*n-n,4*(o+n)+o)),x=new paper.Path.Rectangle(m,new paper.Size(4,4));this.keyboard.addChild(x);var S=new paper.Rectangle(new paper.Point(4*o+5*n,4*(o+n)),new paper.Size(6*o+5*n,o)),z=new paper.Path.Rectangle(S,new paper.Size(4,4));this.keyboard.addChild(z);var L=x.clone();L.position.x=z.bounds.rightCenter.x+x.bounds.width/2+n,this.keyboard.addChild(L);var K=R.clone();K.position.x=this.keyboard.lastChild.bounds.topRight.x+R.bounds.width/2+n,this.keyboard.addChild(K);var T=new paper.Rectangle(new paper.Point(this.keyboard.lastChild.bounds.topRight.x+n,4*(o+n)),new paper.Point(f.bounds.bottomRight.x,f.bounds.bottomRight.y+n+o)),B=new paper.Path.Rectangle(T,new paper.Size(4,4));this.keyboard.addChild(B);var F=new paper.PointText(new paper.Point(h.bounds.bottomRight.x-n,h.bounds.bottomRight.y-n));F.justification="right",F.fontSize=a,F.fontFamily="Roboto",F.fillColor="white",F.content="del",this.type.addChild(F);var M=new paper.PointText(new paper.Point(u.bounds.bottomRight.x-n,u.bounds.bottomRight.y-n));M.justification="right",M.fontSize=a,M.fontFamily="Roboto",M.fillColor="white",M.content="return",this.type.addChild(M),paper.view.bounds.width<1e3&&(M.content="‚Ä¢",F.content="‚Üê"),this.keyboard.style={fillColor:"#808080",strokeColor:new paper.Color(1,1,1,.4),strokeWidth:1.5,shadowColor:new paper.Color(0,0,0,.45),shadowBlur:4,shadowOffset:new paper.Point(0,2)}},Keyboard.prototype.initPath=function(){this.path.style={strokeWidth:6,fillColor:new paper.Color(0,0,0,0),strokeCap:"round",strokeJoin:"round"},this.path.strokeColor={gradient:{stops:[new paper.Color("#00FFF4"),new paper.Color("#1F00FF")]},origin:this.debug.boundingBox.bounds.leftCenter,destination:this.debug.boundingBox.bounds.rightCenter},this.graphics=new paper.Group([this.keyboard,this.path]),this.graphics.bringToFront()},Keyboard.prototype.locateKey=function(e,t){var n=null;if(1==t||0==t){for(var o=this.keyMap.length-1;o>=0;o--)this.keyMap[o]==e&&(n=o);null==n&&console.log("No match")}else 2==t&&("meta"==e&&(n=52),"alt"==e&&(n=54),"control"==e&&(n=56),"shift"==e&&(n=58));return n},Keyboard.prototype.onKeyDown=function(e,t){var n=this.locateKey(e,t);return this.keyboard.children[n].shadowColor=new paper.Color(0,0,0,.2),this.keyboard.children[n].shadowBlur=1,this.keyboard.children[n].shadowOffset=new paper.Point(0,1),"backspace"==e?void this["delete"]():"enter"==e?void paper.view.draw():(this.addToText(e),void this.addToPath(n))},Keyboard.prototype.onKeyUp=function(e,t){for(var n=this.keyboard.children.length-1;n>=0;n--)this.keyboard.children[n].shadowColor=new paper.Color(0,0,0,.45),this.keyboard.children[n].shadowBlur=4,this.keyboard.children[n].shadowOffset=new paper.Point(0,2);"enter"==e&&this.path.segments.length>1&&(this.sendToPrinter(),this.resetAll()),paper.view.draw()},Keyboard.prototype.addToPath=function(e){this.path.add(this.keyboard.children[e].bounds.center),this.path.smooth(),paper.view.draw()},Keyboard.prototype.addToText=function(e){this.text.push(e)},Keyboard.prototype["delete"]=function(){this.path.removeSegment(this.path.segments.length-1),this.text.pop(),paper.view.draw()},Keyboard.prototype.sendToPrinter=function(){for(var e=this.text.length-1;e>=0;e--)"meta"!=this.text[e]&&"control"!=this.text[e]&&"alt"!=this.text[e]&&"shift"!=this.text[e]&&"tab"!=this.text[e]&&"capslock"!=this.text[e]||(this.text[e]="‚ñë");var t='<?xml version="1.0" encoding="utf-8"?>';t+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="'+paper.view.bounds.width+'" height="'+paper.view.bounds.height+'">',t+=this.path.exportSVG({asString:!0}),t+="</svg>";var n=new Blob([t],{type:"data:image/svg+xml"});saveAs(n,this.text.join("")+".svg")},Keyboard.prototype.resetAll=function(){this.path.removeSegments(),this.text=[]},document.addEventListener("DOMContentLoaded",function(){console.log("üëª"),App.init(document.getElementById("container"))});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIktleWJvYXJkLmpzIiwibG9hZGVyLmpzIiwiYXBwLmpzIiwiaW5kZXguanMiXSwibmFtZXMiOlsiS2V5Ym9hcmQiLCJwYXJhbWV0ZXJzIiwidGhpcyIsImVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FudmFzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJrZXlNYXAiLCJ1bmRlZmluZWQiLCJkZWJ1ZyIsInByb3BzIiwicGFwZXIiLCJzZXR1cCIsImF0dGFjaEV2ZW50cyIsImRyYXciLCJMb2FkZXIiLCJxdWV1ZSIsImluaXQiLCJjcmVhdGVqcyIsIkxvYWRRdWV1ZSIsIm9uIiwib25Mb2FkQ29tcGxldGVkIiwib25Mb2FkRXJyb3IiLCJvbkxvYWRQcm9ncmVzcyIsImxvYWQiLCJtYW5pZmVzdCIsIm9uTG9hZGVkIiwiY29uc29sZSIsImxvZyIsInNyYyIsInEiLCJsb2FkTWFuaWZlc3QiLCJnZXRDb250ZW50QnlJZCIsImlkIiwiZ2V0UmVzdWx0IiwiQXBwIiwiY29udGFpbmVyIiwiaW5pdGlhbExvYWQiLCJsb2FkQ29tcGxldGVkIiwiYmluZCIsImlubmVySFRNTCIsImluaXRpYWxUcmFuc2l0aW9uSW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJkaXNwb3NlIiwicHJvdG90eXBlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcm9qZWN0IiwiYWN0aXZlTGF5ZXIiLCJyZW1vdmVDaGlsZHJlbiIsIndpZHRoIiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0Iiwic3R5bGUiLCJ2aWV3Iiwidmlld1NpemUiLCJTaXplIiwia2V5Ym9hcmQiLCJHcm91cCIsInBhdGgiLCJQYXRoIiwidHlwZSIsImdyYXBoaWNzIiwiYnJpbmdUb0Zyb250IiwiZHJhd0tleWJvYXJkIiwicG9zaXRpb24iLCJjZW50ZXIiLCJib3VuZGluZ0JveCIsIlJlY3RhbmdsZSIsImJvdW5kcyIsImtleWJvYXJkV2lkdGgiLCJNYXRoIiwicm91bmQiLCJtYXJnaW4iLCJrZXlTaXplIiwidHlwZVNpemUiLCJpIiwiUG9pbnQiLCJrZXkiLCJhZGRDaGlsZCIsImRlbCIsImRlbEtleSIsInRhYiIsInRhYktleSIsImNsIiwiY2xLZXkiLCJydCIsImxhc3RDaGlsZCIsInRvcFJpZ2h0IiwieCIsInJ0S2V5Iiwic2hpZnQiLCJzaGlmdEtleSIsInNoaWZ0MiIsImJvdHRvbVJpZ2h0IiwieSIsInNoaWZ0MktleSIsImN0cmwxIiwiY3RybDFLZXkiLCJhbHQxIiwiYWx0MUtleSIsImNtZDEiLCJjbWQxS2V5Iiwic3BhY2UiLCJzcGFjZUtleSIsImNtZDJLZXkiLCJjbG9uZSIsInJpZ2h0Q2VudGVyIiwiYWx0MktleSIsImN0cmwyIiwiY3RybDJLZXkiLCJkZWxUeXBlIiwiUG9pbnRUZXh0IiwianVzdGlmaWNhdGlvbiIsImZvbnRTaXplIiwiZm9udEZhbWlseSIsImZpbGxDb2xvciIsImNvbnRlbnQiLCJyZXR1cm5UeXBlIiwic3Ryb2tlQ29sb3IiLCJDb2xvciIsInN0cm9rZVdpZHRoIiwic2hhZG93Q29sb3IiLCJzaGFkb3dCbHVyIiwic2hhZG93T2Zmc2V0IiwiaW5pdFBhdGgiLCJzdHJva2VDYXAiLCJzdHJva2VKb2luIiwiZ3JhZGllbnQiLCJzdG9wcyIsIm9yaWdpbiIsImxlZnRDZW50ZXIiLCJkZXN0aW5hdGlvbiIsImxvY2F0ZUtleSIsImxvY2F0aW9uIiwiaW5kZXgiLCJsZW5ndGgiLCJvbktleURvd24iLCJjaGlsZHJlbiIsImFkZFRvVGV4dCIsImFkZFRvUGF0aCIsIm9uS2V5VXAiLCJzZWdtZW50cyIsInNlbmRUb1ByaW50ZXIiLCJyZXNldEFsbCIsInNtb290aCIsImNoYXJhY3RlciIsInRleHQiLCJwdXNoIiwicmVtb3ZlU2VnbWVudCIsInBvcCIsInN2ZyIsImV4cG9ydFNWRyIsImFzU3RyaW5nIiwiYmxvYiIsIkJsb2IiLCJzYXZlQXMiLCJqb2luIiwicmVtb3ZlU2VnbWVudHMiLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6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QUcsTUFFQTlJLE1BQUE4QyxLQUFBM0MsUUFJQWYsU0FBQThDLFVBQUFxRyxjQUFBLFdBR0EsSUFBQSxHQUFBbkUsR0FBQTlFLEtBQUFxSixLQUFBWCxPQUFBLEVBQUE1RCxHQUFBLEVBQUFBLElBQ0EsUUFBQTlFLEtBQUFxSixLQUFBdkUsSUFBQSxXQUFBOUUsS0FBQXFKLEtBQUF2RSxJQUFBLE9BQUE5RSxLQUFBcUosS0FBQXZFLElBQUEsU0FBQTlFLEtBQUFxSixLQUFBdkUsSUFBQSxPQUFBOUUsS0FBQXFKLEtBQUF2RSxJQUFBLFlBQUE5RSxLQUFBcUosS0FBQXZFLEtBQ0E5RSxLQUFBcUosS0FBQXZFLEdBQUEsSUFLQSxJQUFBMkUsR0FBQSx3Q0FDQUEsSUFBQSw2R0FBQS9JLE1BQUE4QyxLQUFBZSxPQUFBcEIsTUFBQSxhQUFBekMsTUFBQThDLEtBQUFlLE9BQUFsQixPQUFBLEtBQ0FvRyxHQUFBekosS0FBQTZELEtBQUE2RixXQUFBQyxVQUFBLElBQ0FGLEdBQUEsUUFFQSxJQUFBRyxHQUFBLEdBQUFDLE9BQUFKLElBQ0ExRixLQUFBLHNCQUdBK0YsUUFBQUYsRUFBQTVKLEtBQUFxSixLQUFBVSxLQUFBLElBQUEsU0FJQWpLLFNBQUE4QyxVQUFBc0csU0FBQSxXQUVBbEosS0FBQTZELEtBQUFtRyxpQkFDQWhLLEtBQUFxSixTRzVlQW5KLFNBQUE0QyxpQkFBQSxtQkFBQSxXQUVBcEIsUUFBQUMsSUFBQSxNQUNBTyxJQUFBbEIsS0FBQWQsU0FBQStKLGVBQUEiLCJmaWxlIjoiYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEtleWJvYXJkKHBhcmFtZXRlcnMpIHtcblxuXHR0aGlzLmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbWFpbicpWzBdO1xuXHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjYW52YXMnKVswXTtcblxuXHR0aGlzLmtleU1hcCA9IHVuZGVmaW5lZDtcblx0dGhpcy5kZWJ1ZyA9IHt9O1xuXHR0aGlzLnByb3BzID0ge307XG5cblx0cGFwZXIuc2V0dXAodGhpcy5jYW52YXMpO1xuXHRcblx0dGhpcy5hdHRhY2hFdmVudHMoKTtcblx0dGhpcy5kcmF3KCk7XG5cblx0Ly8gcGFwZXIudmlldy56b29tID0gMC41O1xuXG59XG5cbktleWJvYXJkLnByb3RvdHlwZS5hdHRhY2hFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuXHQvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcblx0Ly8gXHR0aGlzLm9uS2V5RG93bihlLmtleS50b0xvd2VyQ2FzZSgpLCBlLmxvY2F0aW9uKTtcblx0Ly8gXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdC8vIH0uYmluZCh0aGlzKSk7XG5cblx0Ly8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuXHQvLyBcdHRoaXMub25LZXlVcChlLmtleS50b0xvd2VyQ2FzZSgpLCBlLmxvY2F0aW9uKTtcblx0Ly8gXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdC8vIH0uYmluZCh0aGlzKSk7XG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKGUpIHtcblx0XHR0aGlzLmRyYXcoKTtcblx0fS5iaW5kKHRoaXMpKTtcblxufVxuXG5LZXlib2FyZC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge1xuXG5cdHBhcGVyLnByb2plY3QuYWN0aXZlTGF5ZXIucmVtb3ZlQ2hpbGRyZW4oKTtcblxuXHQvLyBWaWV3IHJlc2l6ZVxuXHR0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHR0aGlzLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdHRoaXMuY2FudmFzLnN0eWxlID0gJyc7XG5cdHBhcGVyLnZpZXcudmlld1NpemUgPSBuZXcgcGFwZXIuU2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcblxuXHQvLyBJbml0IFVJXG5cdHRoaXMua2V5Ym9hcmQgPSBuZXcgcGFwZXIuR3JvdXAoKTtcblx0dGhpcy5wYXRoID0gbmV3IHBhcGVyLlBhdGgoKTtcblx0dGhpcy50eXBlID0gbmV3IHBhcGVyLkdyb3VwKCk7XG5cdHRoaXMuZ3JhcGhpY3MgPSBuZXcgcGFwZXIuR3JvdXAoW3RoaXMua2V5Ym9hcmQsIHRoaXMucGF0aCwgdGhpcy50eXBlXSk7XG5cdHRoaXMuZ3JhcGhpY3MuYnJpbmdUb0Zyb250KCk7XG5cblx0Ly8gRHJhdyBVSVxuXHR0aGlzLmRyYXdLZXlib2FyZCgpO1xuXG5cdC8vIFJlc3BvbnNpdmVcblx0dGhpcy5ncmFwaGljcy5wb3NpdGlvbiA9IHBhcGVyLnZpZXcuY2VudGVyO1xuXG5cdC8vIERlYnVnXG5cdC8vIHRoaXMuZGVidWcuY2VudGVyID0gbmV3IHBhcGVyLlNoYXBlLkNpcmNsZShuZXcgcGFwZXIuUG9pbnQoODAsIDUwKSwgMik7XG5cdC8vIHRoaXMuZGVidWcuY2VudGVyLmZpbGxDb2xvciA9IFwicmVkXCI7XG5cdC8vIHRoaXMuZGVidWcuY2VudGVyLnBvc2l0aW9uID0gcGFwZXIudmlldy5jZW50ZXI7XG5cdHRoaXMuZGVidWcuYm91bmRpbmdCb3ggPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUodGhpcy5rZXlib2FyZC5ib3VuZHMpO1xuXHR0aGlzLmRlYnVnLmJvdW5kaW5nQm94LnBvc2l0aW9uID0gcGFwZXIudmlldy5jZW50ZXI7XG5cblx0cGFwZXIudmlldy5kcmF3KCk7XG5cbn1cblxuS2V5Ym9hcmQucHJvdG90eXBlLmRyYXdLZXlib2FyZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cblx0Ly8gTUFETkVTU1xuXG5cdHZhciBrZXlib2FyZFdpZHRoID0gTWF0aC5yb3VuZChwYXBlci52aWV3LmJvdW5kcy53aWR0aCowLjkpO1xuXHR2YXIgbWFyZ2luID0gTWF0aC5yb3VuZChwYXBlci52aWV3LmJvdW5kcy53aWR0aCowLjAwNyk7XG5cdHZhciBrZXlTaXplID0gTWF0aC5yb3VuZCggKGtleWJvYXJkV2lkdGggLSAxMyptYXJnaW4pIC8gMTUuNSApO1xuXHR2YXIgdHlwZVNpemUgPSBwYXBlci52aWV3LmJvdW5kcy53aWR0aCowLjAxNTtcblxuXHQvLyBEcmF3IGZpcnN0IGxpbmVcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCAxMzsgaSsrKSB7XG5cdFx0dmFyIHBhdGggPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludChpKihrZXlTaXplICsgbWFyZ2luKSwgMCksIGtleVNpemUpO1xuXHRcdHZhciBrZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUocGF0aCwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHRcdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoa2V5KTtcblx0fVxuXG5cdC8vIERlbCBrZXkgaXMgMS41eCB3aWRlciB0aGFuIGEgS2V5XG5cdHZhciBkZWwgPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludCgxMyooa2V5U2l6ZSArIG1hcmdpbiksIDApLCBuZXcgcGFwZXIuU2l6ZShrZXlTaXplKjEuNSwga2V5U2l6ZSkpO1xuXHR2YXIgZGVsS2V5ID0gbmV3IHBhcGVyLlBhdGguUmVjdGFuZ2xlKGRlbCwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKGRlbEtleSk7XG5cblx0Ly8gVGFiIGtleSBpcyAxLjV4IHdpZGVyIHRoYW4gYSBLZXlcblx0dmFyIHRhYiA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KDAsIGtleVNpemUgKyBtYXJnaW4pLCBuZXcgcGFwZXIuU2l6ZShrZXlTaXplKjEuNSwga2V5U2l6ZSkpO1xuXHR2YXIgdGFiS2V5ID0gbmV3IHBhcGVyLlBhdGguUmVjdGFuZ2xlKHRhYiwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKHRhYktleSk7XG5cblx0Ly8gRHJhdyBzZWNvbmQgbGluZVxuXHRmb3IgKHZhciBpID0gMDsgaSA8IDEzOyBpKyspIHtcblx0XHR2YXIgcGF0aCA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KGkqKGtleVNpemUgKyBtYXJnaW4pICsgdGFiS2V5LmJvdW5kcy53aWR0aCArIG1hcmdpbiwga2V5U2l6ZSArIG1hcmdpbiksIGtleVNpemUpO1xuXHRcdHZhciBrZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUocGF0aCwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHRcdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoa2V5KTtcblx0fVxuXG5cdC8vIENhcHNsb2NrIGtleSBpcyAxLjV4IHdpZGVyIHRoYW4gYSBLZXkgKyBtYXJnaW5cblx0dmFyIGNsID0gbmV3IHBhcGVyLlJlY3RhbmdsZShuZXcgcGFwZXIuUG9pbnQoMCwgKGtleVNpemUgKyBtYXJnaW4pICogMiksIG5ldyBwYXBlci5TaXplKGtleVNpemUqMS41ICsgbWFyZ2luLCBrZXlTaXplKSk7XG5cdHZhciBjbEtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShjbCwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKGNsS2V5KTtcblxuXHQvLyBEcmF3IHRoaXJkIGxpbmVcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCAxMTsgaSsrKSB7XG5cdFx0dmFyIHBhdGggPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludChpKihrZXlTaXplICsgbWFyZ2luKSArIGNsS2V5LmJvdW5kcy53aWR0aCArIG1hcmdpbiwgKGtleVNpemUgKyBtYXJnaW4pICogMiksIGtleVNpemUpO1xuXHRcdHZhciBrZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUocGF0aCwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHRcdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoa2V5KTtcblx0fVxuXG5cdC8vIFJldHVybiBrZXkgaXMgMnggd2lkZXIgdGhhbiBhIEtleVxuXHR2YXIgcnQgPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludCh0aGlzLmtleWJvYXJkLmxhc3RDaGlsZC5ib3VuZHMudG9wUmlnaHQueCArIG1hcmdpbiwgKGtleVNpemUgKyBtYXJnaW4pICogMiksIG5ldyBwYXBlci5TaXplKGtleVNpemUqMiwga2V5U2l6ZSkpO1xuXHR2YXIgcnRLZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUocnQsIG5ldyBwYXBlci5TaXplKDQsIDQpKTtcblx0dGhpcy5rZXlib2FyZC5hZGRDaGlsZChydEtleSk7XG5cblx0Ly8gU2hpZnQga2V5IGlzIDJ4IHdpZGVyIHRoYW4gYSBLZXkgKyAyIHggbWFyZ2luXG5cdHZhciBzaGlmdCA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KDAsIChrZXlTaXplICsgbWFyZ2luKSAqIDMpLCBuZXcgcGFwZXIuU2l6ZShrZXlTaXplKjIgKyAyICogbWFyZ2luLCBrZXlTaXplKSk7XG5cdHZhciBzaGlmdEtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShzaGlmdCwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKHNoaWZ0S2V5KTtcblxuXHQvLyBEcmF3IGZvdXJ0aCBsaW5lXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xuXHRcdHZhciBwYXRoID0gbmV3IHBhcGVyLlJlY3RhbmdsZShuZXcgcGFwZXIuUG9pbnQoaSooa2V5U2l6ZSArIG1hcmdpbikgKyBzaGlmdEtleS5ib3VuZHMud2lkdGggKyBtYXJnaW4sIChrZXlTaXplICsgbWFyZ2luKSAqIDMpLCBrZXlTaXplKTtcblx0XHR2YXIga2V5ID0gbmV3IHBhcGVyLlBhdGguUmVjdGFuZ2xlKHBhdGgsIG5ldyBwYXBlci5TaXplKDQsIDQpKTtcblx0XHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKGtleSk7XG5cdH1cblxuXHQvLyBTaGlmdCBrZXkgaXMgMnggd2lkZXIgdGhhbiBhIEtleSArIDIgeCBtYXJnaW5cblx0dmFyIHNoaWZ0MiA9IG5ldyBwYXBlci5SZWN0YW5nbGUobmV3IHBhcGVyLlBvaW50KHRoaXMua2V5Ym9hcmQubGFzdENoaWxkLmJvdW5kcy50b3BSaWdodC54ICsgbWFyZ2luLCAoa2V5U2l6ZSArIG1hcmdpbikgKiAzKSwgbmV3IHBhcGVyLlBvaW50KHJ0S2V5LmJvdW5kcy5ib3R0b21SaWdodC54LCBydEtleS5ib3VuZHMuYm90dG9tUmlnaHQueSArIG1hcmdpbiArIGtleVNpemUpKTtcblx0dmFyIHNoaWZ0MktleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShzaGlmdDIsIG5ldyBwYXBlci5TaXplKDQsIDQpKTtcblx0dGhpcy5rZXlib2FyZC5hZGRDaGlsZChzaGlmdDJLZXkpO1xuXG5cdC8vIEN0cmwxIGtleSBpcyAxLjV4IHdpZGVyIHRoYW4gYSBLZXlcblx0dmFyIGN0cmwxID0gbmV3IHBhcGVyLlJlY3RhbmdsZShuZXcgcGFwZXIuUG9pbnQoMCwgKGtleVNpemUgKyBtYXJnaW4pICogNCksIG5ldyBwYXBlci5TaXplKGtleVNpemUqMS41LCBrZXlTaXplKSk7XG5cdHZhciBjdHJsMUtleSA9IG5ldyBwYXBlci5QYXRoLlJlY3RhbmdsZShjdHJsMSwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKGN0cmwxS2V5KTtcblxuXHQvLyBBbHQxIGtleSBpcyAxeCBrZXkgKyAxeCBtYXJnaW5cblx0dmFyIGFsdDEgPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludCgxLjUqa2V5U2l6ZSArIG1hcmdpbiwgKGtleVNpemUgKyBtYXJnaW4pICogNCksIG5ldyBwYXBlci5TaXplKGtleVNpemUgKyBtYXJnaW4sIGtleVNpemUpKTtcblx0dmFyIGFsdDFLZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUoYWx0MSwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKGFsdDFLZXkpO1xuXG5cdC8vIENvbW1hbmQxIGtleSBpcyA0a2V5ICsgNW1hcmdpbnNcblx0dmFyIGNtZDEgPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludCh0aGlzLmtleWJvYXJkLmxhc3RDaGlsZC5ib3VuZHMudG9wUmlnaHQueCArIG1hcmdpbiwgKGtleVNpemUgKyBtYXJnaW4pICogNCksIG5ldyBwYXBlci5Qb2ludChrZXlTaXplKjQgKyBtYXJnaW4qNSAtIG1hcmdpbiwgKGtleVNpemUgKyBtYXJnaW4pICogNCArIGtleVNpemUpKTtcblx0dmFyIGNtZDFLZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUoY21kMSwgbmV3IHBhcGVyLlNpemUoNCwgNCkpO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKGNtZDFLZXkpO1xuXG5cdC8vIFNwYWNlIGtleSBpcyA2eCBrZXkgKyA1eCBtYXJnaW5cblx0dmFyIHNwYWNlID0gbmV3IHBhcGVyLlJlY3RhbmdsZShuZXcgcGFwZXIuUG9pbnQoNCprZXlTaXplICsgNSptYXJnaW4sIChrZXlTaXplICsgbWFyZ2luKSAqIDQpLCBuZXcgcGFwZXIuU2l6ZSg2KmtleVNpemUgKyA1Km1hcmdpbiwga2V5U2l6ZSkpO1xuXHR2YXIgc3BhY2VLZXkgPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUoc3BhY2UsIG5ldyBwYXBlci5TaXplKDQsIDQpKTtcblx0dGhpcy5rZXlib2FyZC5hZGRDaGlsZChzcGFjZUtleSk7XG5cblx0dmFyIGNtZDJLZXkgPSBjbWQxS2V5LmNsb25lKCk7XG5cdGNtZDJLZXkucG9zaXRpb24ueCA9IHNwYWNlS2V5LmJvdW5kcy5yaWdodENlbnRlci54ICsgY21kMUtleS5ib3VuZHMud2lkdGgvMiArIG1hcmdpbjtcblx0dGhpcy5rZXlib2FyZC5hZGRDaGlsZChjbWQyS2V5KTtcblxuXHR2YXIgYWx0MktleSA9IGFsdDFLZXkuY2xvbmUoKTtcblx0YWx0MktleS5wb3NpdGlvbi54ID0gdGhpcy5rZXlib2FyZC5sYXN0Q2hpbGQuYm91bmRzLnRvcFJpZ2h0LnggKyBhbHQxS2V5LmJvdW5kcy53aWR0aC8yICsgbWFyZ2luO1xuXHR0aGlzLmtleWJvYXJkLmFkZENoaWxkKGFsdDJLZXkpO1xuXG5cdC8vIEN0cmwyIGtleSBjb21wbGV0ZXMgdGhlIGxheW91dFxuXHR2YXIgY3RybDIgPSBuZXcgcGFwZXIuUmVjdGFuZ2xlKG5ldyBwYXBlci5Qb2ludCh0aGlzLmtleWJvYXJkLmxhc3RDaGlsZC5ib3VuZHMudG9wUmlnaHQueCArIG1hcmdpbiwgKGtleVNpemUgKyBtYXJnaW4pICogNCksIG5ldyBwYXBlci5Qb2ludChzaGlmdDJLZXkuYm91bmRzLmJvdHRvbVJpZ2h0LngsIHNoaWZ0MktleS5ib3VuZHMuYm90dG9tUmlnaHQueSArIG1hcmdpbiArIGtleVNpemUpKTtcblx0dmFyIGN0cmwyS2V5ID0gbmV3IHBhcGVyLlBhdGguUmVjdGFuZ2xlKGN0cmwyLCBuZXcgcGFwZXIuU2l6ZSg0LCA0KSk7XG5cdHRoaXMua2V5Ym9hcmQuYWRkQ2hpbGQoY3RybDJLZXkpO1xuXG5cdC8vIFR5cGVcblx0dmFyIGRlbFR5cGUgPSBuZXcgcGFwZXIuUG9pbnRUZXh0KG5ldyBwYXBlci5Qb2ludChkZWxLZXkuYm91bmRzLmJvdHRvbVJpZ2h0LnggLSBtYXJnaW4sIGRlbEtleS5ib3VuZHMuYm90dG9tUmlnaHQueSAtIG1hcmdpbikpO1xuXHRkZWxUeXBlLmp1c3RpZmljYXRpb24gPSAncmlnaHQnO1xuXHRkZWxUeXBlLmZvbnRTaXplID0gdHlwZVNpemU7XG5cdGRlbFR5cGUuZm9udEZhbWlseT0gJ1JvYm90byc7XG5cdGRlbFR5cGUuZmlsbENvbG9yID0gJ3doaXRlJztcblx0ZGVsVHlwZS5jb250ZW50ID0gJ2RlbCc7XG5cdHRoaXMudHlwZS5hZGRDaGlsZChkZWxUeXBlKTtcblxuXHR2YXIgcmV0dXJuVHlwZSA9IG5ldyBwYXBlci5Qb2ludFRleHQobmV3IHBhcGVyLlBvaW50KHJ0S2V5LmJvdW5kcy5ib3R0b21SaWdodC54IC0gbWFyZ2luLCBydEtleS5ib3VuZHMuYm90dG9tUmlnaHQueSAtIG1hcmdpbikpO1xuXHRyZXR1cm5UeXBlLmp1c3RpZmljYXRpb24gPSAncmlnaHQnO1xuXHRyZXR1cm5UeXBlLmZvbnRTaXplID0gdHlwZVNpemU7XG5cdHJldHVyblR5cGUuZm9udEZhbWlseT0gJ1JvYm90byc7XG5cdHJldHVyblR5cGUuZmlsbENvbG9yID0gJ3doaXRlJztcblx0cmV0dXJuVHlwZS5jb250ZW50ID0gJ3JldHVybic7XG5cdHRoaXMudHlwZS5hZGRDaGlsZChyZXR1cm5UeXBlKTtcblxuXHRpZihwYXBlci52aWV3LmJvdW5kcy53aWR0aCA8IDEwMDApIHtcblx0XHRyZXR1cm5UeXBlLmNvbnRlbnQgPSBcIuKAolwiO1xuXHRcdGRlbFR5cGUuY29udGVudCA9IFwi4oaQXCI7XG5cdH1cblxuXHR0aGlzLmtleWJvYXJkLnN0eWxlID0ge1xuXHRcdGZpbGxDb2xvcjogXCIjODA4MDgwXCIsXG5cdFx0c3Ryb2tlQ29sb3I6IG5ldyBwYXBlci5Db2xvcigxLDEsMSwwLjQpLFxuXHRcdHN0cm9rZVdpZHRoOiAxLjUsXG5cdFx0c2hhZG93Q29sb3I6IG5ldyBwYXBlci5Db2xvcigwLDAsMCwwLjQ1KSxcblx0XHRzaGFkb3dCbHVyOiA0LFxuXHRcdHNoYWRvd09mZnNldDogbmV3IHBhcGVyLlBvaW50KDAsIDIpXG5cdH1cblxufVxuXG4vLyBLZXlib2FyZC5wcm90b3R5cGUuaW5pdEtleWJvYXJkID0gZnVuY3Rpb24oa2V5Ym9hcmQsIHN2Zykge1xuXG4vLyBcdGNvbnNvbGUubG9nKCdJbXBvcnRlZCEnKTtcblxuLy8gXHQvLyBEZWJ1Z1xuLy8gXHR0aGlzLmRlYnVnLmNlbnRlciA9IG5ldyBwYXBlci5TaGFwZS5DaXJjbGUobmV3IHBhcGVyLlBvaW50KDgwLCA1MCksIDIpO1xuLy8gXHR0aGlzLmRlYnVnLmNlbnRlci5maWxsQ29sb3IgPSBcInJlZFwiO1xuXG4vLyBcdC8vIEtleWJvYXJkXG4vLyBcdHRoaXMua2V5Ym9hcmQgPSBrZXlib2FyZC5jaGlsZHJlblswXTtcbi8vIFx0Ly8gdGhpcy5rZXlib2FyZC5hcHBseU1hdHJpeCA9IGZhbHNlO1xuXG4vLyBcdHRoaXMua2V5Ym9hcmQuc3R5bGUgPSB7XG4vLyBcdFx0ZmlsbENvbG9yOiBcIiM4MDgwODBcIixcbi8vIFx0XHRzdHJva2VDb2xvcjogbmV3IHBhcGVyLkNvbG9yKDEsMSwxLDAuNCksXG4vLyBcdFx0c3Ryb2tlV2lkdGg6IDEuNSxcbi8vIFx0XHRzaGFkb3dDb2xvcjogbmV3IHBhcGVyLkNvbG9yKDAsMCwwLDAuNDUpLFxuLy8gXHRcdHNoYWRvd0JsdXI6IDQsXG4vLyBcdFx0c2hhZG93T2Zmc2V0OiBuZXcgcGFwZXIuUG9pbnQoMCwgMilcbi8vIFx0fVxuXG4vLyBcdC8vIERlYnVnXG4vLyBcdHRoaXMuZGVidWcuYm91bmRpbmdCb3ggPSBuZXcgcGFwZXIuUGF0aC5SZWN0YW5nbGUodGhpcy5rZXlib2FyZC5ib3VuZHMpO1xuLy8gXHQvLyB0aGlzLmRlYnVnLmJvdW5kaW5nQm94LnN0cm9rZUNvbG9yID0gXCJibHVlXCI7XG5cbi8vIFx0Zm9yICh2YXIgaSA9IHRoaXMua2V5Ym9hcmQuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcbi8vIFx0XHQvLyBTdHlsZSBrZXlzIGluZGl2aWR1YWxseVxuXG4vLyBcdFx0dGhpcy5rZXlib2FyZC5jaGlsZHJlbltpXS5zdHJva2VDb2xvciA9IG5ldyBwYXBlci5Db2xvcihNYXRoLnJhbmRvbSgpLCBNYXRoLnJhbmRvbSgpLCBNYXRoLnJhbmRvbSgpKTtcbi8vIFx0XHR0aGlzLmtleWJvYXJkLmNoaWxkcmVuW2ldLnN0cm9rZUNvbG9yID0ge1xuLy8gXHRcdFx0Z3JhZGllbnQ6IHtcbi8vIFx0XHRcdFx0c3RvcHM6IFtuZXcgcGFwZXIuQ29sb3IoMSwxLDEsMC4zKSwgbmV3IHBhcGVyLkNvbG9yKDEsMSwxLDAuMildXG4vLyBcdFx0XHR9LFxuLy8gXHRcdFx0b3JpZ2luOiB0aGlzLmtleWJvYXJkLmNoaWxkcmVuW2ldLmJvdW5kcy50b3BDZW50ZXIsXG4vLyBcdFx0XHRkZXN0aW5hdGlvbjogdGhpcy5rZXlib2FyZC5jaGlsZHJlbltpXS5ib3VuZHMuYm90dG9tQ2VudGVyXG4vLyBcdFx0fVxuXG4vLyBcdH1cblxuLy8gXHR0aGlzLmtleU1hcCA9IFtcbi8vIFx0XHRcIjFcIixcbi8vIFx0XHRcImBcIixcbi8vIFx0XHRcIjJcIixcbi8vIFx0XHRcIjNcIixcbi8vIFx0XHRcIjRcIixcbi8vIFx0XHRcIjVcIixcbi8vIFx0XHRcIjZcIixcbi8vIFx0XHRcIjdcIixcbi8vIFx0XHRcIjhcIixcbi8vIFx0XHRcIjlcIixcbi8vIFx0XHRcIjBcIixcbi8vIFx0XHRcIi1cIixcbi8vIFx0XHRcIj1cIixcbi8vIFx0XHRcInFcIixcbi8vIFx0XHRcIndcIixcbi8vIFx0XHRcImVcIixcbi8vIFx0XHRcInJcIixcbi8vIFx0XHRcInRcIixcbi8vIFx0XHRcInlcIixcbi8vIFx0XHRcInVcIixcbi8vIFx0XHRcImlcIixcbi8vIFx0XHRcIm9cIixcbi8vIFx0XHRcInBcIixcbi8vIFx0XHRcIltcIixcbi8vIFx0XHRcIl1cIixcbi8vIFx0XHRcIlxcXFxcIixcbi8vIFx0XHRcImFcIixcbi8vIFx0XHRcInNcIixcbi8vIFx0XHRcImRcIixcbi8vIFx0XHRcImZcIixcbi8vIFx0XHRcImdcIixcbi8vIFx0XHRcImhcIixcbi8vIFx0XHRcImpcIixcbi8vIFx0XHRcImtcIixcbi8vIFx0XHRcImxcIixcbi8vIFx0XHRcIjtcIixcbi8vIFx0XHRcIidcIixcbi8vIFx0XHRcInpcIixcbi8vIFx0XHRcInhcIixcbi8vIFx0XHRcImNcIixcbi8vIFx0XHRcInZcIixcbi8vIFx0XHRcImJcIixcbi8vIFx0XHRcIm5cIixcbi8vIFx0XHRcIm1cIixcbi8vIFx0XHRcIixcIixcbi8vIFx0XHRcIi5cIixcbi8vIFx0XHRcIi9cIixcbi8vIFx0XHRcImJhY2tzcGFjZVwiLFxuLy8gXHRcdFwidGFiXCIsXG4vLyBcdFx0XCJjYXBzbG9ja1wiLFxuLy8gXHRcdFwic2hpZnRcIiwgLy8gTFxuLy8gXHRcdFwiIFwiLCAvLyBTcGFjZVxuLy8gXHRcdFwiLy9tZXRhXCIsIC8vIFJcbi8vIFx0XHRcImNvbnRyb2xcIiwgLy8gTFxuLy8gXHRcdFwiLy9hbHRcIiwgLy8gUlxuLy8gXHRcdFwiYWx0XCIsIC8vIExcbi8vIFx0XHRcIi8vY29udHJvbFwiLCAvLyBSXG4vLyBcdFx0XCJtZXRhXCIsIC8vIExcbi8vIFx0XHRcIi8vc2hpZnRcIiwgLy8gUlxuLy8gXHRcdFwiZW50ZXJcIixcbi8vIFx0XVxuXG4vLyBcdHZhciByZXR1cm5UeXBlID0gbmV3IHBhcGVyLlJhc3RlcigncmV0dXJuJyk7XG4vLyBcdHJldHVyblR5cGUucG9zaXRpb24ueCA9IHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5bNTldLmJvdW5kcy5ib3R0b21SaWdodC54IC0gcmV0dXJuVHlwZS53aWR0aC8yIC0gMTI7XG4vLyBcdHJldHVyblR5cGUucG9zaXRpb24ueSA9IHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5bNTldLmJvdW5kcy5ib3R0b21SaWdodC55IC0gcmV0dXJuVHlwZS5oZWlnaHQvMiAtIDEyO1xuXG4vLyBcdHZhciBkZWxUeXBlID0gbmV3IHBhcGVyLlJhc3RlcignZGVsJyk7XG4vLyBcdGRlbFR5cGUucG9zaXRpb24ueCA9IHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5bNDddLmJvdW5kcy5ib3R0b21SaWdodC54IC0gZGVsVHlwZS53aWR0aC8yIC0gMTI7XG4vLyBcdGRlbFR5cGUucG9zaXRpb24ueSA9IHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5bNDddLmJvdW5kcy5ib3R0b21SaWdodC55IC0gZGVsVHlwZS5oZWlnaHQvMiAtIDEyO1xuLy8gXHQvLyB2YXIgcmV0dXJuVHlwZSA9IG5ldyBwYXBlci5Qb2ludFRleHQobmV3IHBhcGVyLlBvaW50KHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5bNTldLmJvdW5kcy5ib3R0b21SaWdodC54IC0gMTIsIHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5bNTldLmJvdW5kcy5ib3R0b21SaWdodC55IC0gMTIpKTtcbi8vIFx0Ly8gcmV0dXJuVHlwZS5qdXN0aWZpY2F0aW9uID0gJ3JpZ2h0Jztcbi8vIFx0Ly8gcmV0dXJuVHlwZS5mb250RmFtaWx5PSAnUm9ib3RvJztcblxuLy8gXHQvLyByZXR1cm5UeXBlLmZpbGxDb2xvciA9ICd3aGl0ZSc7XG4vLyBcdC8vIHJldHVyblR5cGUuY29udGVudCA9ICdyZXR1cm4nO1xuXG4vLyBcdC8vIHZhciBkZWxUeXBlID0gbmV3IHBhcGVyLlBvaW50VGV4dChuZXcgcGFwZXIuUG9pbnQodGhpcy5rZXlib2FyZC5jaGlsZHJlbls0N10uYm91bmRzLmJvdHRvbVJpZ2h0LnggLSAxMiwgdGhpcy5rZXlib2FyZC5jaGlsZHJlbls0N10uYm91bmRzLmJvdHRvbVJpZ2h0LnkgLSAxMikpO1xuLy8gXHQvLyBkZWxUeXBlLmp1c3RpZmljYXRpb24gPSAncmlnaHQnO1xuLy8gXHQvLyBkZWxUeXBlLmZvbnRGYW1pbHk9ICdSb2JvdG8nO1xuXG4vLyBcdC8vIGRlbFR5cGUuZmlsbENvbG9yID0gJ3doaXRlJztcbi8vIFx0Ly8gZGVsVHlwZS5jb250ZW50ID0gJ2RlbCc7XG5cbi8vIFx0dGhpcy50eXBlID0gbmV3IHBhcGVyLkdyb3VwKFtyZXR1cm5UeXBlLCBkZWxUeXBlXSk7XG5cbi8vIFx0dGhpcy5pbml0UGF0aCgpO1xuLy8gXHR0aGlzLnJlc2l6ZSgpO1xuXG4vLyB9XG5cbktleWJvYXJkLnByb3RvdHlwZS5pbml0UGF0aCA9IGZ1bmN0aW9uKCkge1xuXG5cdHRoaXMucGF0aC5zdHlsZSA9IHtcblx0XHRzdHJva2VXaWR0aCA6IDYsXG5cdFx0ZmlsbENvbG9yOiBuZXcgcGFwZXIuQ29sb3IoMCwwLDAsMCksXG5cdFx0c3Ryb2tlQ2FwIDogJ3JvdW5kJyxcblx0XHRzdHJva2VKb2luIDogJ3JvdW5kJ1xuXHR9XG5cblx0dGhpcy5wYXRoLnN0cm9rZUNvbG9yID0ge1xuXHRcdGdyYWRpZW50OiB7XG5cdFx0XHRzdG9wczogW25ldyBwYXBlci5Db2xvcignIzAwRkZGNCcpLCBuZXcgcGFwZXIuQ29sb3IoJyMxRjAwRkYnKV1cblx0XHR9LFxuXHRcdG9yaWdpbjogdGhpcy5kZWJ1Zy5ib3VuZGluZ0JveC5ib3VuZHMubGVmdENlbnRlcixcblx0XHRkZXN0aW5hdGlvbjogdGhpcy5kZWJ1Zy5ib3VuZGluZ0JveC5ib3VuZHMucmlnaHRDZW50ZXJcblx0fVxuXG5cdHRoaXMuZ3JhcGhpY3MgPSBuZXcgcGFwZXIuR3JvdXAoW3RoaXMua2V5Ym9hcmQsIHRoaXMucGF0aF0pO1xuXHR0aGlzLmdyYXBoaWNzLmJyaW5nVG9Gcm9udCgpO1xuXG59XG5cbktleWJvYXJkLnByb3RvdHlwZS5sb2NhdGVLZXkgPSBmdW5jdGlvbihrZXksIGxvY2F0aW9uKSB7XG5cblx0dmFyIGluZGV4ID0gbnVsbFxuXG5cdGlmKGxvY2F0aW9uID09IDEgfHwgbG9jYXRpb24gPT0gMCkge1xuXG5cdFx0Ly8gTGVmdCBzaWRlXG5cdFx0XG5cdFx0Zm9yICh2YXIgaSA9IHRoaXMua2V5TWFwLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRpZih0aGlzLmtleU1hcFtpXSA9PSBrZXkpIGluZGV4ID0gaTtcblx0XHR9XG5cblx0XHRpZihpbmRleCA9PSBudWxsKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnTm8gbWF0Y2gnKTtcblx0XHR9XG5cblx0fVxuXHRlbHNlIGlmKGxvY2F0aW9uID09IDIpIHtcblxuXHRcdC8vIFJpZ2h0IHNpZGVcblxuXHRcdGlmKGtleSA9PSBcIm1ldGFcIikge1xuXHRcdFx0aW5kZXggPSA1Mjtcblx0XHR9XG5cblx0XHRpZihrZXkgPT0gXCJhbHRcIikge1xuXHRcdFx0aW5kZXggPSA1NDtcblx0XHR9XG5cblx0XHRpZihrZXkgPT0gXCJjb250cm9sXCIpIHtcblx0XHRcdGluZGV4ID0gNTY7XG5cdFx0fVxuXG5cdFx0aWYoa2V5ID09IFwic2hpZnRcIikge1xuXHRcdFx0aW5kZXggPSA1ODtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiBpbmRleDtcblxufVxuXG5LZXlib2FyZC5wcm90b3R5cGUub25LZXlEb3duID0gZnVuY3Rpb24oa2V5LCBsb2NhdGlvbikge1xuXG5cdHZhciBpbmRleCA9IHRoaXMubG9jYXRlS2V5KGtleSwgbG9jYXRpb24pO1xuXG5cdHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5baW5kZXhdLnNoYWRvd0NvbG9yID0gbmV3IHBhcGVyLkNvbG9yKDAsMCwwLDAuMik7XG5cdHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5baW5kZXhdLnNoYWRvd0JsdXIgPSAxO1xuXHR0aGlzLmtleWJvYXJkLmNoaWxkcmVuW2luZGV4XS5zaGFkb3dPZmZzZXQgPSBuZXcgcGFwZXIuUG9pbnQoMCwgMSk7XG5cblx0aWYoa2V5ID09IFwiYmFja3NwYWNlXCIpIHtcblx0XHR0aGlzLmRlbGV0ZSgpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmKGtleSA9PSBcImVudGVyXCIpIHtcblx0XHRwYXBlci52aWV3LmRyYXcoKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHR0aGlzLmFkZFRvVGV4dChrZXkpO1xuXHR0aGlzLmFkZFRvUGF0aChpbmRleCk7XG5cbn1cblxuS2V5Ym9hcmQucHJvdG90eXBlLm9uS2V5VXAgPSBmdW5jdGlvbihrZXksIGxvY2F0aW9uKSB7XG5cblx0Zm9yICh2YXIgaSA9IHRoaXMua2V5Ym9hcmQuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcblx0XHR0aGlzLmtleWJvYXJkLmNoaWxkcmVuW2ldLnNoYWRvd0NvbG9yID0gbmV3IHBhcGVyLkNvbG9yKDAsMCwwLDAuNDUpO1xuXHRcdHRoaXMua2V5Ym9hcmQuY2hpbGRyZW5baV0uc2hhZG93Qmx1ciA9IDQ7XG5cdFx0dGhpcy5rZXlib2FyZC5jaGlsZHJlbltpXS5zaGFkb3dPZmZzZXQgPSBuZXcgcGFwZXIuUG9pbnQoMCwgMik7XG5cblx0fVxuXG5cdGlmKGtleSA9PSBcImVudGVyXCIpIHtcblx0XHRpZih0aGlzLnBhdGguc2VnbWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0dGhpcy5zZW5kVG9QcmludGVyKCk7XG5cdFx0XHR0aGlzLnJlc2V0QWxsKCk7XG5cdFx0fVxuXHR9XG5cblx0cGFwZXIudmlldy5kcmF3KCk7XG59XG5cbktleWJvYXJkLnByb3RvdHlwZS5hZGRUb1BhdGggPSBmdW5jdGlvbihpbmRleCkge1xuXG5cdHRoaXMucGF0aC5hZGQodGhpcy5rZXlib2FyZC5jaGlsZHJlbltpbmRleF0uYm91bmRzLmNlbnRlcik7XG5cdHRoaXMucGF0aC5zbW9vdGgoKTtcblxuXHRwYXBlci52aWV3LmRyYXcoKTtcblxufVxuXG5LZXlib2FyZC5wcm90b3R5cGUuYWRkVG9UZXh0ID0gZnVuY3Rpb24oY2hhcmFjdGVyKSB7XG5cblx0dGhpcy50ZXh0LnB1c2goY2hhcmFjdGVyKTtcblxufVxuXG5LZXlib2FyZC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24oKSB7XG5cblx0dGhpcy5wYXRoLnJlbW92ZVNlZ21lbnQodGhpcy5wYXRoLnNlZ21lbnRzLmxlbmd0aC0xKTtcblx0dGhpcy50ZXh0LnBvcCgpO1xuXG5cdHBhcGVyLnZpZXcuZHJhdygpO1xuXG59XG5cbktleWJvYXJkLnByb3RvdHlwZS5zZW5kVG9QcmludGVyID0gZnVuY3Rpb24oKSB7XG5cblx0Ly8gRm9ybWF0IHRleHQgZm9yIGV4cG9ydGluZ1xuXHRmb3IgKHZhciBpID0gdGhpcy50ZXh0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0aWYodGhpcy50ZXh0W2ldID09ICdtZXRhJyB8fCB0aGlzLnRleHRbaV0gPT0gJ2NvbnRyb2wnIHx8IHRoaXMudGV4dFtpXSA9PSAnYWx0JyB8fCB0aGlzLnRleHRbaV0gPT0gJ3NoaWZ0JyB8fCB0aGlzLnRleHRbaV0gPT0gJ3RhYicgfHwgdGhpcy50ZXh0W2ldID09ICdjYXBzbG9jaycpIHtcblx0XHRcdHRoaXMudGV4dFtpXSA9ICfilpEnO1xuXHRcdH1cblx0fVxuXG5cdC8vIEZvcm1hdCBzdmcgZm9yIHNhdmluZ1xuXHR2YXIgc3ZnID0gJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cInV0Zi04XCI/Pic7XG5cdHN2ZyArPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB3aWR0aD1cIicgKyBwYXBlci52aWV3LmJvdW5kcy53aWR0aCArICdcIiBoZWlnaHQ9XCInICsgcGFwZXIudmlldy5ib3VuZHMuaGVpZ2h0ICsgJ1wiPic7XG5cdHN2ZyArPSB0aGlzLnBhdGguZXhwb3J0U1ZHKHsgYXNTdHJpbmc6IHRydWUgfSk7XG5cdHN2ZyArPSAnPC9zdmc+JztcblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtzdmddLCB7XG5cdFx0dHlwZTogJ2RhdGE6aW1hZ2Uvc3ZnK3htbCdcblx0fSk7XG5cblx0c2F2ZUFzKGJsb2IsIHRoaXMudGV4dC5qb2luKCcnKSArICcuc3ZnJyk7XG5cbn1cblxuS2V5Ym9hcmQucHJvdG90eXBlLnJlc2V0QWxsID0gZnVuY3Rpb24oKSB7XG5cblx0dGhpcy5wYXRoLnJlbW92ZVNlZ21lbnRzKCk7XG5cdHRoaXMudGV4dCA9IFtdO1xuXG59IiwidmFyIExvYWRlciA9IHtcblxuXHRxdWV1ZSA6IHVuZGVmaW5lZCxcblxuXHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnF1ZXVlID0gbmV3IGNyZWF0ZWpzLkxvYWRRdWV1ZSgpO1xuXHRcdHRoaXMucXVldWUub24oJ2NvbXBsZXRlJywgdGhpcy5vbkxvYWRDb21wbGV0ZWQpO1xuXHRcdHRoaXMucXVldWUub24oJ2Vycm9yJywgdGhpcy5vbkxvYWRFcnJvcik7XG5cdFx0dGhpcy5xdWV1ZS5vbigncHJvZ3Jlc3MnLCB0aGlzLm9uTG9hZFByb2dyZXNzKTtcblx0fSxcblxuXHRsb2FkOiBmdW5jdGlvbihtYW5pZmVzdCwgb25Mb2FkZWQpIHtcblx0XHRjb25zb2xlLmxvZygnTG9hZGluZzonLCBtYW5pZmVzdFswXS5zcmMpO1xuXHRcdHZhciBxID0gdGhpcy5xdWV1ZTtcblx0XHRxLm9uKCdjb21wbGV0ZScsIG9uTG9hZGVkKTtcblx0XHRxLmxvYWRNYW5pZmVzdChtYW5pZmVzdCk7XG5cdH0sXG5cblx0Z2V0Q29udGVudEJ5SWQ6IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuIHRoaXMucXVldWUuZ2V0UmVzdWx0KGlkKTtcblx0fSxcblxuXHRvbkxvYWRDb21wbGV0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnNvbGUubG9nKCdMb2FkIENvbXBsZXRlZCcpO1xuXHR9LFxuXG5cdG9uTG9hZEVycm9yOiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLmxvZygnTG9hZCBFcnJvcicpO1xuXHR9LFxuXG5cdG9uTG9hZFByb2dyZXNzOiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLmxvZygnLicpO1xuXHR9LFxuXHRcbn07IiwidmFyIEFwcCA9IHtcblxuXHRjb250YWluZXI6IHVuZGVmaW5lZCxcblxuXHRpbml0OiBmdW5jdGlvbihjb250YWluZXIpIHtcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0XHRMb2FkZXIuaW5pdCgpO1xuXHRcdHRoaXMuaW5pdGlhbExvYWQoKTtcblx0fSxcblxuXHRpbml0aWFsTG9hZDogZnVuY3Rpb24oKSB7XG5cdFx0TG9hZGVyLmxvYWQoW1xuXHRcdFx0e2lkOiAnaG9tZXBhZ2UnLCBzcmM6ICdkYXRhL2hvbWVwYWdlLmh0bWwnfVxuXHRcdF0sIHRoaXMubG9hZENvbXBsZXRlZC5iaW5kKHRoaXMpKTsgLy8gQmluZGluZyBhbGxvd3MgdG8ga2VlcCB0aGUgQXBwIHNjb3BlIG9uIGNhbGxiYWNrXG5cdH0sXG5cblx0bG9hZENvbXBsZXRlZDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gTG9hZGVyLmdldENvbnRlbnRCeUlkKCdob21lcGFnZScpO1xuXHRcdHRoaXMuaW5pdGlhbFRyYW5zaXRpb25JbigpO1xuXHR9LFxuXG5cdGluaXRpYWxUcmFuc2l0aW9uSW46IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2ZhZGUtaW4nKTtcblx0XHRjb25zb2xlLmxvZygnW1BBTl0g4piR77iPJyk7XG5cdFx0S2V5Ym9hcmQgPSBuZXcgS2V5Ym9hcmQoKTtcblx0fSxcblxuXHRkaXNwb3NlOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblx0fVxuXG59OyIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuXG5cdGNvbnNvbGUubG9nKCfwn5G7Jyk7XG5cdEFwcC5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKSk7XG5cbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
